import{I as w,_ as V}from"./ProviderDetails.vue_vue_type_script_setup_true_lang-C3DP7wkg.js";import{Q as h,x as b,c as g,Z as d,B as u,R as p,a9 as c,Y as A,U as l,S as a,G as x,$ as T,a1 as B,X as E,a0 as I,bq as y,ab as _,aq as M,W as C,bo as $,ao as N,a4 as D,w as U,o as L,aU as S,b as q}from"./index-Bojm1y6E.js";import{C as F}from"./Container-DwPOpOAS.js";import{T as G}from"./Toolbar-vNnvoS93.js";import"./MediaItemThumb-DwfpR_T2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./marquee_text_sync-DVmdTJDu.js";import"./VBtn-CM67b0_Y.js";import"./VDialog-VPA5hIjU.js";import"./layout-sM8mqvOQ.js";import"./ListItem-MrZ2Q4nd.js";import"./Button-VrwZ27wP.js";import"./VContainer-CSaZaMAu.js";/* empty css              */import"./VToolbar-CsJqzZb6.js";const H={style:{"margin-bottom":"10px"}},P={style:{width:"50px"}},Q={key:0,class:"text-caption"},R=h({__name:"Chapters",props:{itemDetails:{}},setup(v){const i=v,s=b(!0),e=function(){s.value=!s.value},f=g(()=>[{label:"tooltip.collapse_expand",icon:s.value?"mdi-chevron-up":"mdi-chevron-down",action:e,overflowAllowed:!1}]),n=function(t){!i.itemDetails||!y(i.itemDetails)||D.playMedia(i.itemDetails.uri,void 0,void 0,t.position.toString())};return(t,r)=>(a(),d("section",H,[u(G,{title:t.$t("chapters"),"menu-items":f.value,onTitleClicked:e},null,8,["title","menu-items"]),u(A),s.value?(a(),p(F,{key:0},{default:l(()=>[u(B,null,{default:l(()=>{var m,k;return[(a(!0),d(x,null,T((k=(m=t.itemDetails)==null?void 0:m.metadata)==null?void 0:k.chapters,o=>(a(),p(E,{key:o.position,disabled:!I(y)(t.itemDetails),onClick:W=>n(o)},{prepend:l(()=>[C("div",P,[u($,null,{default:l(()=>[N(_(o.position),1)]),_:2},1024)])]),title:l(()=>[C("div",null,_(o.name),1)]),append:l(()=>[o.end?(a(),d("span",Q,_(I(M)(o.end-o.start)),1)):c("",!0)]),_:2},1032,["disabled","onClick"]))),128))]}),_:1})]),_:1})):c("",!0)]))}}),le=h({__name:"AudiobookDetails",props:{itemId:{},provider:{}},setup(v){const i=v,s=b(!1),e=b(),f=async function(){e.value=await D.getAudiobook(i.itemId,i.provider)};return U(()=>i.itemId,n=>{n&&f()},{immediate:!0}),L(()=>{const n=D.subscribe(S.MEDIA_ITEM_UPDATED,t=>{var m;const r=t.data;((m=e.value)==null?void 0:m.uri)==r.uri&&(s.value=!0)});q(n)}),(n,t)=>{var r;return a(),d(x,null,[u(w,{item:e.value},null,8,["item"]),e.value&&((r=e.value.metadata)!=null&&r.chapters)?(a(),p(R,{key:0,"item-details":e.value},null,8,["item-details"])):c("",!0),e.value?(a(),p(V,{key:1,"item-details":e.value},null,8,["item-details"])):c("",!0)],64)}}});export{le as default};
