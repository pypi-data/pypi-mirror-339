import{p as ge,a0 as H,Y as V,_ as pe,X as $e,aa as he,ab as xe,t as h,f as E,s as o,z as w,w as be,x as we,ax as Le,a as d,d as t,u as ke,V as ye,a9 as Se,K as O,a8 as Ue,N as l,g as n,S as Te,aE as Fe,e as u,T as Ie,a3 as $,a7 as R,h as X,ah as Y,an as Be}from"./Style.js";import{S as Pe,h as Ae,g as Ee,L as J,I as Q}from"./api.js";import{T as Oe}from"./Toggle.js";var Re=h('<div class="font-bold"> </div> <div> </div>',1),Ge=h('<div class="my-5"></div>'),Ne=h("<!> <!>",1),je=h("<div><!></div>"),Me=h('<form method="post"><!> <!> <!> <!> <!> <div class="flex justify-center w-full"><div><!></div> <!></div></form>'),qe=h('<div class="flex justify-center w-full"><div class="w-52 h-52 mt-6 mb-14"><img loading="lazy" alt="LOGO" referrerpolicy="no-referrer"></div></div> <!> <div class="flex justify-center w-full"><div><!></div></div> <div></div> <div id="loaded" class="h-0 w-0"></div>',1);function ze(W,Z){ge(Z,!0);const[ee,ae]=ye(),f=()=>$e(Se,"$share",ee),G="/a/login/",N="/a/login/fallback/",re="/a/saml/init/";let j=H(!1),te=V(se),_=H(!1),L=pe([]);function v(e){return Ue(f(),e)}function se(){return f().backend.sso?window.location.pathname.includes("fallback")?N:re:G}function M(){if(!l(_))return;let e=document.getElementById("id_username");e&&(localStorage.login_username=e.value)}he(()=>{l(j)&&(localStorage.login_remember=l(_)?"1":"0",l(_)?M():localStorage.login_username="")});function oe(){if(localStorage.login_remember=="1"){O(_,!0);let e=document.getElementById("id_username");e&&localStorage.login_username&&(e.value=localStorage.login_username)}O(j,!0)}function le(){let e=document.querySelectorAll(".aw-backend-form-alert");if(e)for(let s of e)s.field?L.push({color:"red",title:`${v("common.invalid_value")}: "${s.field}"`,msg:s.innerText}):L.push({color:"red",title:v("common.invalid_form"),msg:s.innerText})}xe(()=>{oe(),le()});var q=qe(),z=E(q),ne=n(z),ie=n(ne),C=o(z,2);{var de=e=>{var s=Ge();Te(s,21,()=>L,Ie,(k,g)=>{const y=V(()=>l(g).color||"red");Fe(k,{get color(){return l(y)},class:"mx-20",children:(S,D)=>{var x=Re(),U=E(x),T=n(U),F=o(U,2),I=n(F);d(()=>{u(T,l(g).title),u(I,l(g).msg)}),t(S,x)},$$slots:{default:!0}})}),t(e,s)};w(C,e=>{L.length&&e(de)})}var K=o(C,2),ve=n(K),ce=n(ve);{var ue=e=>{Pe(e,{})},me=e=>{var s=Me(),k=n(s);Ae(k,Ee);var g=o(k,2);J(g,{for:"id_username",children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.user")]),t(a,r)},$$slots:{default:!0}});var y=o(g,2);Q(y,{type:"text",id:"id_username",name:"username",oninput:M});var S=o(y,2);{var D=a=>{var c=Ne(),r=E(c);J(r,{for:"id_password",class:"mt-2",children:(B,m)=>{var p=$();d(P=>u(p,P),[()=>v("login.pwd")]),t(B,p)},$$slots:{default:!0}});var i=o(r,2);Q(i,{type:"password",name:"password",id:"id_password"}),t(a,c)};w(S,a=>{(!f().backend.sso||window.location.pathname.includes("fallback"))&&a(D)})}var x=o(S,2);Oe(x,{class:"mt-2",get checked(){return l(_)},set checked(a){O(_,a,!0)},children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.saveUser")]),t(a,r)},$$slots:{default:!0}});var U=o(x,2),T=n(U),F=n(T);R(F,{type:"submit",class:"mt-5",children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.btn")]),t(a,r)},$$slots:{default:!0}});var I=o(T,2);{var _e=a=>{var c=je(),r=n(c);{var i=m=>{R(m,{href:G,class:`ml-2 mt-5 ${Y}`,children:(p,P)=>{var b=$();d(A=>u(b,A),[()=>v("login.sso")]),t(p,b)},$$slots:{default:!0}})},B=m=>{R(m,{href:N,class:`ml-2 mt-5 ${Y}`,children:(p,P)=>{var b=$();d(A=>u(b,A),[()=>v("login.localUser")]),t(p,b)},$$slots:{default:!0}})};w(r,m=>{window.location.pathname.includes("fallback")?m(i):m(B,!1)})}t(a,c)};w(I,a=>{f().backend.sso&&a(_e)})}d(()=>X(s,"action",l(te))),t(e,s)};w(ce,e=>{f().backend?e(me,!1):e(ue)})}var fe=o(K,2);be(fe,1,we(Le)),d(()=>X(ie,"src",f().backend.logo)),t(W,q),ke(),ae()}Be(ze,{target:document.getElementById("login")});
