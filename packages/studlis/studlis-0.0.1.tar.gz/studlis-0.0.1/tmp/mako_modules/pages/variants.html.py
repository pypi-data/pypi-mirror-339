# -*- coding:utf-8 -*-
from mako import runtime, filters, cache
UNDEFINED = runtime.UNDEFINED
STOP_RENDERING = runtime.STOP_RENDERING
__M_dict_builtin = dict
__M_locals_builtin = locals
_magic_number = 10
_modified_time = 1707919259.667785
_enable_loop = True
_template_filename = '/home/niklas/projects/mvicon/mvicon/webui/pages/variants.html'
_template_uri = 'pages/variants.html'
_source_encoding = 'utf-8'
_exports = []


def render_body(context,**pageargs):
    __M_caller = context.caller_stack._push_frame()
    try:
        __M_locals = __M_dict_builtin(pageargs=pageargs)
        __M_writer = context.writer()
        __M_writer('<template tpl_id="page_variants_list">\n    <div>\n        <h2>Variants</h2>\n        <div class="row">\n            <div class="col-8">\n                <table class="variant-table table-modern">\n                    <thead ><tr>\n\n                        <td>Name</td>\n                        <td>Color</td>\n                        <td>Size</td>\n                        <td>Default</td>\n                        <td>Icons</td>\n                    </tr></thead>\n                    <tbody class="variant-table-content"></tbody>\n                </table>\n                <button type="button" class="btn btn-primary" onclick="page_variants.new();return false;">New Variant</button>\n            </div>\n            <div class="col-4">\n                <div class="d-none ml-5 mt-5" id="variant_config">\n                    <div class="mb-3">\n                        <label id="variant_id" class="form-label">Variant ID: (new)</label>\n                        \n                    </div>\n                    <div class="mb-3">\n                        <label for="variant_name" class="form-label">Variant Name</label>\n                        <input type="text" class="form-control" id="variant_name" placeholder="...variant name...">\n                    </div>\n                    <div class="mb-3">\n                        <label for="variant_abbreviation" class="form-label">Variant Abbreviation</label>\n                        <input type="text" class="form-control" id="variant_abbreviation" placeholder="max 3 chars">\n                    </div>\n                    <div class="mb-3">\n                        <label for="variant_color" class="form-label">Color</label>\n                        <input type="text" class="form-control" id="variant_color" placeholder="#000000">\n                        <small>Leave empty to preserve original</small>\n                    </div>\n                    <div class="mb-3">\n                        <label for="variant_height" class="form-label">Height</label>\n                        <input type="text" class="form-control" id="variant_height" placeholder="">\n                    </div>\n                    <div class="mb-3">\n                        <label for="variant_width" class="form-label">Width</label>\n                        <input type="text" class="form-control" id="variant_width" placeholder="">\n                    </div>\n                    <div class="mb-3">\n                        <label for="variant_prefix" class="form-label">Prefix</label>\n                        <input type="text" class="form-control" id="variant_prefix" placeholder="">\n                    </div>\n                    <div class="mb-3">\n                        <label for="variant_postfix" class="form-label">Postfix</label>\n                        <input type="text" class="form-control" id="variant_postfix" placeholder="">\n                    </div>\n                    <small>Either prefix or postfix must be set, the combination must be unique!</small>\n                    <div class="mb-3">\n                        <label for="variant_default_export" class="form-label">Default</label>\n                        <input type="checkbox" class="form-check-input ml-3" id="variant_default_export" /><br />\n                        <small>If enabled, this variant is added to each new icon.</small><br />\n                        <small>If enabled for a new variant, it is added to each icon.</small>\n                    </div>\n                    \n                    <hr>\n                    <button type="button" class="btn btn-primary" onclick="page_variants.save();return false;">Save</button>\n                </div>\n            </div>\n       \n    </div>\n</template>\n<template tpl_id="variant_element">\n    <tr>\n        \n        <td class="variant-name"></td>\n        <td class=""><div class="color-box"></div><span class="variant-color"></span></td>\n        <td class="variant-size"></td>\n        <td class="variant-default"></td>\n        <td class="variant-count"></td>\n    </tr>\n\n</template>\n\n\n\n\n\n<script>\n    var page_variants = {};\n    page_variants.show = function(){\n        $("#variant_config").addClass("d-none");\n        node=$("#main-view-content").tpl("page_variants_list");\n        DoRequest("variants",{filter:""},function(data){\n            $(".variant-table-content").empty();\n\n            $.each(data.value,function(index,item){\n                var node = $(".variant-table-content").appendtpl("variant_element");\n                node.find(".variant-name").html(item.name);\n                node.find(".variant-color").html(item.color);\n                node.find(".color-box").css("background-color",item.color);\n                node.find(".variant-size").html(item.width+"x"+item.height);\n                node.find(".variant-default").html((item.is_default==1?"Yes":"No"));\n                node.find(".variant-count").html(item.icon_count);\n                node.click(function(){page_variants.edit(item);});\n                $(".variant-table-content").append(node);\n            });\n        });\n    }\n    page_variants.new = function(){\n        $("#variant_config").removeClass("d-none");\n        $("#variant_id").html("Variant ID: (new)").attr("variant_id","-1");\n        $("#variant_name").val("");\n        $("#variant_abbreviation").val("");\n        $("#variant_color").val("");\n        $("#variant_height").val("");\n        $("#variant_width").val("");\n        $("#variant_prefix").val("");\n        $("#variant_postfix").val("");\n        $("#variant_default_export").prop("checked",false);\n    }\n    page_variants.edit = function(item){\n        $("#variant_config").removeClass("d-none");\n        $("#variant_id").html("Variant ID: "+item.id).attr("variant_id",item.id);\n        $("#variant_name").val(item.name);\n        $("#variant_abbreviation").val(item.abbreviation);\n        $("#variant_color").val(item.color);\n        $("#variant_height").val(item.height);\n        $("#variant_width").val(item.width);\n        $("#variant_prefix").val(item.prefix);\n        $("#variant_postfix").val(item.postfix);\n        $("#variant_default_export").prop("checked",item.is_default==1);\n    }\n    page_variants.save = function(){\n        var data = {\n            variant_id:$("#variant_id").attr("variant_id"),\n            name:$("#variant_name").val(),\n            abbreviation:$("#variant_abbreviation").val(),\n            color:$("#variant_color").val(),\n            height:$("#variant_height").val(),\n            width:$("#variant_width").val(),\n            prefix:$("#variant_prefix").val(),\n            postfix:$("#variant_postfix").val(),\n            is_default:$("#variant_default_export").prop("checked")\n        }\n        DoRequest("update_variant",data,function(data){\n            page_variants.show();\n        });\n    }\n</script>')
        return ''
    finally:
        context.caller_stack._pop_frame()


"""
__M_BEGIN_METADATA
{"filename": "/home/niklas/projects/mvicon/mvicon/webui/pages/variants.html", "uri": "pages/variants.html", "source_encoding": "utf-8", "line_map": {"16": 0, "21": 1, "27": 21}}
__M_END_METADATA
"""
