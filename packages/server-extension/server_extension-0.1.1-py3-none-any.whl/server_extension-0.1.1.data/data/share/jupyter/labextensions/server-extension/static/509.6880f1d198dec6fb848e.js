"use strict";(self.webpackChunkserver_extension=self.webpackChunkserver_extension||[]).push([[509],{56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var r={},s=[],i=0;i<n.length;i++){var l=n[i],c=o.base?l[0]+o.base:l[0],d=r[c]||0,p="".concat(c," ").concat(d);r[c]=d+1;var u=t(p),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(g);else{var f=a(g,o);o.byIndex=i,e.splice(i,0,{identifier:p,updater:f,references:1})}s.push(p)}return s}function a(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,a){var r=o(n=n||[],a=a||{});return function(n){n=n||[];for(var s=0;s<r.length;s++){var i=t(r[s]);e[i].references--}for(var l=o(n,a),c=0;c<r.length;c++){var d=t(r[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}r=l}}},89:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.requestAPI=void 0;const o=t(808),a=t(695);e.requestAPI=async function(n="",e={}){const t=a.ServerConnection.makeSettings(),r=o.URLExt.join(t.baseUrl,"server-extension",n);let s;try{s=await a.ServerConnection.makeRequest(r,e,t)}catch(n){throw new a.ServerConnection.NetworkError(n)}let i=await s.text();if(i.length>0)try{i=JSON.parse(i)}catch(n){console.log("Not a JSON response body.",s)}if(!s.ok)throw new a.ServerConnection.ResponseError(s,i.message||i);return i}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,o,a,r){"string"==typeof n&&(n=[[null,n,void 0]]);var s={};if(o)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var c=0;c<n.length;c++){var d=[].concat(n[c]);o&&s[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),e.push(d))}},e}},475:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(601),a=t.n(o),r=t(314),s=t.n(r)()(a());s.push([n.id,"/*\n    See the JupyterLab Developer Guide for useful CSS Patterns:\n\n    https://jupyterlab.readthedocs.io/en/stable/developer/css.html\n*/\n/* /*\n    See the JupyterLab Developer Guide for useful CSS Patterns:\n\n    https://jupyterlab.readthedocs.io/en/stable/developer/css.html\n*/\n\n/* Arrange elements in a vertical stack */\n.chatbot-panel {\n    padding: 16px;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n/* Title styling */\n.chatbot-title {\n    text-align: center;\n    padding: 10px;\n    border-bottom: 1px solid #e0e0e0;\n    margin-bottom: 16px;\n}\n\n/* Container for the prompt box and return button */\n.input-container {\n    display: flex;\n    gap: 8px;\n    padding: 10px;\n    margin-top: auto;\n}\n\n/* Style for the input box */\n.input-container input {\n    flex: 1;\n    padding: 8px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n}\n\n/* Style for the return button */\n.input-container button {\n    padding: 8px 16px;\n    background-color: #7a7876;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n}\n\n.input-container button:hover {\n    background-color: #9c9995;\n}\n\n/* Container for displaying chat messages */\n.chat-container {\n    flex: 1;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    padding: 10px;\n}\n\n/* Shared styles for all chat messages */\n.chat-message {\n    padding: 5px;\n    margin-bottom: 5px;           /* Add some space inside the message box */\n    word-wrap: break-word;       /* Wrap long words if necessary */\n  }\n  \n  /* Style specifically for user messages */\n.chat-message.user {\n    text-align: right;           /* Align text to the right */\n    margin-left: auto;           /* Push message to the right */\n  }\n  \n  /* Style specifically for assistant messages */\n.chat-message.assistant {\n    text-align: left;            /* Align text to the left */\n    margin-right: auto;          /* Push message to the left */\n  }\n  \n  /* Optional: Style for system or error messages */\n.chat-message.system {\n    background-color: #ffe6e6;   /* Light red background */\n    color: #a00;                 /* Dark red text */\n    font-style: italic;          /* Italicize text */\n    text-align: center;          /* Center-align system messages */\n  }\n  \n\n",""]);const i=s},509:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});const o=t(908),a=t(569),r=t(256),s=t(369),i=t(89);t(665);const l=t(369);let c=!1,d="",p=-1,u="";const g={id:"server-extension:plugin",description:"A JupyterLab extension.",autoStart:!0,requires:[s.INotebookTracker],optional:[o.ILayoutRestorer],activate:(n,e,t)=>{console.log("JupyterLab extension server-extension is activated ::))"),(()=>{const o=new r.Widget;o.node.classList.add("chatbot-panel");const s=document.createElement("div");s.classList.add("chat-container");const g=document.createElement("div");g.classList.add("chat-header");const x=document.createElement("div");x.classList.add("notebook-name-display"),x.textContent="No notebook open";const b=document.createElement("div");b.classList.add("model-info"),b.textContent="gemini-2.0-flash",g.appendChild(x),g.appendChild(b),s.appendChild(g);const v=document.createElement("div");v.classList.add("messages-container"),s.appendChild(v);const C=document.createElement("div");C.classList.add("input-container");const k=document.createElement("textarea");k.classList.add("chat-input"),k.placeholder="Generate a practice question based on selected code...";const w=document.createElement("button");w.textContent="ðŸ“",w.classList.add("mode-toggle"),w.title="Toggle between Question Generation and URL Summary";let S=!1;w.addEventListener("click",(()=>{S=!S,c=!1,S?(w.textContent="ðŸ”—",k.placeholder="Enter URL to summarize content..."):(w.textContent="ðŸ“",k.placeholder="Generate a practice question based on selected code...")})),C.appendChild(w),C.appendChild(k),s.appendChild(C),o.node.appendChild(s);const E=document.createElement("div");E.id="chat-buttons-container",o.node.appendChild(E);const L=async()=>{var n,t,o,a,r,s,l,g;const x=k.value.trim();if(x){M("user",x),k.value="",A();try{const b=e.currentWidget,v=[];T();const C=[],w=/(pd\.read_(csv|excel|json|html)\(|sns\.load_dataset\(|pd\.DataFrame\(|pd\.DataFrame\.from_dict\(|pd\.DataFrame\.from_records\()/,E=[];if(b&&b.content){const L=b.content,A=null==L?void 0:L.model;if(A)try{const L=A.cells;if(!b.content)return void M("system","Error: No active notebook");const N=null!==(t=null===(n=e.currentWidget)||void 0===n?void 0:n.content.activeCellIndex)&&void 0!==t?t:0,T=[L.get(N)];if(S)for(let n=0;n<L.length;n++){const e=L.get(n);v.push({index:n+1,content:e.sharedModel.getSource()})}else{if(0===T.length)return void M("system","âš ï¸ Warning: Please select cells to generate a question about their content");for(let n=0;n<L.length;n++){const e=L.get(n),t=e.sharedModel.getSource();if(v.push({index:n+1,content:t}),"code"===e.type){const e=w.test(t);let o=null;if(e){E.push(n+1);const e=/(\b\w+)\s*=\s*(?:pd\.read_\w+\(|sns\.load_dataset\(|pd\.DataFrame\()/,a=t.match(e);a&&(o=a[1])}console.log("DataFrame detected: "+o),C.push({index:n+1,content:t,isDataLoading:e,dataframeVar:o})}}}let z;if(console.log(S?"URL mode - processing all cells":"Selected cells content:",T),!S){const n=null!==(a=null===(o=e.currentWidget)||void 0===o?void 0:o.content.activeCellIndex)&&void 0!==a?a:0,t=A.cells,r=[];let s=0;for(let e=n;e>=0;e--){const n=t.get(e);if("markdown"===n.type&&n.sharedModel.getSource().startsWith("#")&&s++,s>=5)break;r.unshift({index:e+1,content:n.sharedModel.getSource()})}z=r,console.log("Relevant Content: "+JSON.stringify(z))}const P=Object.assign({message:x,notebookContent:z||v,promptType:S?"summary":"question",selectedCell:S?null:T[T.length-1].sharedModel.getSource(),questionType:S?null:"coding",activeCellIndex:null!==(s=null===(r=e.currentWidget)||void 0===r?void 0:r.content.activeCellIndex)&&void 0!==s?s:0,isFollowup:c,previousQuestion:d},S?{}:{notebookDirectory:u,notebookCodeCells:C});console.log("Request body:",P);const W=await(0,i.requestAPI)("message",{method:"POST",body:JSON.stringify(P)});console.log("Working up to here"),console.log(W);const q=W.reply.substring(7,W.reply.length-4),D=JSON.parse(q);let j;j=c?null===(l=e.currentWidget)||void 0===l?void 0:l.content.activeCellIndex:(null===(g=e.currentWidget)||void 0===g?void 0:g.content.activeCellIndex)+1;const _=D.summary;I();const F=j;M("assistant","Location: "+F+"\n\nSummary: "+_),console.log(`Inserting new cell at index ${F} with summary:`,_);const O=D.title||k.value;c&&p>=0&&A&&(A.sharedModel.deleteCell(p),f()),A.sharedModel.insertCell(F,{cell_type:"markdown",source:y(O,_),metadata:{temporary:!0}}),p=F,d=_,c=!0,e.currentWidget&&e.currentWidget.content&&(e.currentWidget.content.activeCellIndex=F),m(F,A),setTimeout((()=>h(F,A)),100)}catch(n){I(),console.error("Failed to get response:",n),M("system","Error: Failed to get response"),c=!1}}}catch(n){I(),console.error("Error in handleMessage:",n),M("system","Error: Failed to process request"),c=!1}}};k.addEventListener("keypress",(n=>{"Enter"!==n.key||n.shiftKey||(n.preventDefault(),S?k.value.trim()?(console.log("Valid URL:",k.value),L()):M("system","Error: Please input a valid link to get response"):k.value.trim()?L():M("system","Error: Please enter a question"))}));const M=(n,e)=>{const t=document.createElement("div");if(t.classList.add("chat-message",n),"assistant"===n){const n=e.replace(/```python\s*([\s\S]*?)```/g,'<pre class="python-code"><code>$1</code></pre>');t.innerHTML=n.replace(/\n/g,"<br>")}else t.innerHTML=e.replace(/\n/g,"<br>");v.appendChild(t),v.scrollTop=v.scrollHeight},A=()=>{const n=document.createElement("div");n.classList.add("chat-message","system","loading-indicator"),n.innerHTML='<div class="typing-indicator"><span></span><span></span><span></span></div> Generating response...',n.id="loading-indicator",v.appendChild(n),v.scrollTop=v.scrollHeight},I=()=>{const n=document.getElementById("loading-indicator");n&&n.remove()},N=()=>{const n=e.currentWidget;if(n instanceof l.NotebookPanel){const e=n.title.label;x.textContent=`Notebook: ${e}`}else x.textContent="No notebook detected..."},T=()=>{const n=e.currentWidget;if(n&&n.context){const e=n.context.path,t=e.lastIndexOf("/");u=-1!==t?e.substring(0,t):".",console.log("Notebook Directory updated:",u)}};e.currentChanged.connect((()=>{N()})),N();const z=new a.MainAreaWidget({content:o});z.id="chatbot-widget",z.title.label="Chat",z.title.closable=!0,n.shell.add(z,"right"),t&&t.add(z,"chatbot-widget")})()}},f=()=>{const n=document.getElementById("chat-buttons-container");n&&(n.innerHTML="")},m=(n,e)=>{console.log(`Adding buttons below chat for cell at index ${n}`);let t=document.getElementById("chat-buttons-container");if(!t)return void console.error("Chat buttons container not found!");const o=document.createElement("button");o.textContent="âœ… Apply",o.className="apply-btn",o.onclick=()=>x(n,e);const a=document.createElement("button");a.textContent="âŒ Cancel",a.className="cancel-btn",a.onclick=()=>b(n,e),t.appendChild(o),t.appendChild(a)},h=(n,e)=>{},x=(n,e)=>{console.log(`Applying changes for cell at index ${n}`),e.sharedModel.cells[n]&&delete e.sharedModel.cells[n].metadata.temporary,c=!1,d="",p=-1,f()},b=(n,e)=>{console.log(`Cancelling changes and deleting cell at index ${n}`),e.sharedModel.deleteCell(n),c=!1,d="",p=-1,f()},y=(n,e)=>{const t=e.split(/Answer:\s*```python/);return t.length<2?`### ${n}\n\n${e}`:`<div class="alert alert-warning">\n  <h3>Question ðŸ¤” ${n}</h3>\n  \n  ${t[0].replace("Question:","").trim()}\n</div>\n\n<details>\n  <summary><strong>Click to reveal answer</strong></summary>\n  \n${"```python"+t[1]}\n</details>`};e.default=g},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},601:n=>{n.exports=function(n){return n[1]}},646:(n,e,t)=>{t.d(e,{A:()=>c});var o=t(601),a=t.n(o),r=t(314),s=t.n(r),i=t(475),l=s()(a());l.i(i.A),l.push([n.id,"/* Base container styles */\n.chatbot-panel {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: #ffffff;\n  position: relative;\n  font-family: 'Google Sans', -apple-system, BlinkMacSystemFont, sans-serif;\n  padding: 0 16px;\n}\n\n.chat-container {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  color: #1f1f1f;\n  font-size: 14px;\n}\n\n/* Messages area */\n.messages-container {\n  position: absolute;\n  top: 16px;\n  left: 0;\n  right: 0;\n  bottom: 210px;\n  overflow-y: scroll;\n  padding: 20px;\n  z-index: 95;\n}\n\n/* Message bubbles */\n.chat-message {\n  padding: 12px 16px;\n  border-radius: 8px;\n  font-size: 13px;\n  line-height: 1.5;\n  max-width: 85%;\n  margin: 8px 0;\n}\n\n.chat-message.user {\n  background: #e8f0fe;\n  margin-left: auto;\n  border-bottom-right-radius: 4px;\n}\n\n.chat-message.assistant {\n  background: #f8f9fa;\n  border-bottom-left-radius: 4px;\n}\n\n.chat-message.system {\n  background: #f1f3f4;\n  color: #5f6368;\n  font-style: italic;\n  text-align: center;\n  max-width: 100%;\n}\n\n/* Code block styling in chat messages */\n.chat-message pre {\n  background-color: #f5f5f5;\n  border-radius: 4px;\n  padding: 10px;\n  margin: 8px 0;\n  overflow-x: auto;\n  border-left: 3px solid #3498db;\n}\n\n.chat-message code {\n  font-family: 'Menlo', 'Monaco', 'Courier New', monospace;\n  font-size: 0.9em;\n}\n\n/* Python code specific styling */\n.chat-message pre.python-code {\n  background-color: #f5f5f5;\n  border-radius: 4px;\n  padding: 10px;\n  margin: 8px 0;\n  overflow-x: auto;\n  border-left: 3px solid #4b8bf4;\n  font-family: 'Menlo', 'Monaco', 'Courier New', monospace;\n  font-size: 0.9em;\n}\n\n/* Question styling */\n.chat-message .question-text {\n  font-weight: 500;\n  margin-bottom: 10px;\n}\n\n/* Answer label styling */\n.chat-message .answer-label {\n  font-weight: 600;\n  color: #2c3e50;\n  margin-top: 15px;\n  margin-bottom: 5px;\n}\n\n/* Input area */\n.input-container {\n  position: absolute;\n  bottom: 50px;\n  left: 16px;\n  right: 16px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 8px;\n  background: #ffffff;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n  z-index: 98;\n}\n\n.chat-input {\n  flex: 1;\n  font-family: inherit;\n  font-size: 13px;\n  padding: 12px 16px;\n  border: none;\n  background: transparent;\n  resize: none;\n  min-height: 24px;\n  max-height: 120px;\n  border-radius: 8px;\n}\n\n.chat-input:focus {\n  outline: none;\n}\n\n/* Placeholder text size */\n.chat-input::placeholder {\n  font-size: 13px;\n  color: #5f6368;\n}\n\n/* Buttons */\n.mode-toggle {\n  width: 40px;\n  height: 40px;\n  padding: 0;\n  font-size: 18px;\n  border-radius: 50%;\n  border: 1px solid #dadce0;\n  background: transparent;\n  color: #1a73e8;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  line-height: 1;\n}\n\n#chat-buttons-container {\n  position: absolute;\n  bottom: 130px;\n  right: 24px;\n  display: flex;\n  gap: 12px;\n  padding: 8px 16px;\n  z-index: 99;\n  background: #ffffff;\n}\n\n.apply-btn,\n.cancel-btn {\n  font-family: inherit;\n  font-size: 14px;\n  font-weight: 500;\n  padding: 0 24px;\n  height: 36px;\n  border-radius: 8px;\n  border: none;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.apply-btn {\n  background: #1a73e8;\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);\n}\n\n.cancel-btn {\n  background: #fff;\n  color: #1a73e8;\n  border: 1px solid rgba(26, 115, 232, 0.5);\n}\n\n/* Header */\n.chat-header {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  background: #ffffff;\n  border-top: 1px solid rgba(0, 0, 0, 0.06);\n  height: 36px;\n  z-index: 97;\n}\n\n.notebook-name-display {\n  color: #5f6368;\n  font-size: 13px;\n  font-weight: 500;\n  padding: 8px 0;\n}\n\n.model-info {\n  color: #1a73e8;\n  font-size: 13px;\n  font-weight: 500;\n  padding: 4px 12px;\n  background: rgba(26, 115, 232, 0.08);\n  border-radius: 8px;\n}\n\n/* Hover states */\n.mode-toggle:hover { background: rgba(26, 115, 232, 0.08); }\n.apply-btn:hover { background: #1557b0; }\n.cancel-btn:hover { background: rgba(26, 115, 232, 0.04); }\n\n/* Loading indicator */\n.loading-indicator {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\n.typing-indicator {\n  display: flex;\n  align-items: center;\n}\n\n.typing-indicator span {\n  height: 8px;\n  width: 8px;\n  background: #3498db;\n  border-radius: 50%;\n  display: inline-block;\n  margin: 0 2px;\n  animation: bounce 1.5s infinite ease-in-out;\n}\n\n.typing-indicator span:nth-child(1) {\n  animation-delay: 0s;\n}\n\n.typing-indicator span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.typing-indicator span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes bounce {\n  0%, 60%, 100% {\n    transform: translateY(0);\n  }\n  30% {\n    transform: translateY(-5px);\n  }\n}\n\n/* Alert styling */\n.alert {\n  padding: 15px;\n  margin-bottom: 20px;\n  border: 1px solid transparent;\n  border-radius: 4px;\n}\n\n.alert-warning {\n  color: #8a6d3b;\n  background-color: #fcf8e3;\n  border-color: #faebcc;\n}\n\n/* Question title styling */\n.alert h3 {\n  margin-top: 0;\n  margin-bottom: 15px;\n  color: #8a6d3b;\n}\n\n/* Details/Summary styling */\ndetails {\n  margin: 15px 0;\n  padding: 10px;\n  background-color: #f8f9fa;\n  border-radius: 4px;\n}\n\ndetails summary {\n  cursor: pointer;\n  padding: 5px;\n  color: #1a73e8;\n}\n\ndetails summary:hover {\n  color: #1557b0;\n}\n\n/* Add your styles here */\n\n",""]);const c=l},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},665:(n,e,t)=>{t.r(e),t.d(e,{default:()=>x});var o=t(72),a=t.n(o),r=t(825),s=t.n(r),i=t(659),l=t.n(i),c=t(56),d=t.n(c),p=t(540),u=t.n(p),g=t(113),f=t.n(g),m=t(646),h={};h.styleTagTransform=f(),h.setAttributes=d(),h.insert=l().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=u(),a()(m.A,h);const x=m.A&&m.A.locals?m.A.locals:void 0},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,a&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var r=t.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}}]);