# C:\Users\CRVI\OneDrive - Hall & Wilcox\promptflowcustomtools\pf-reasoning-tool-proj\pf_reasoning_tool\yamls\reasoning_tool_call.yaml
# --- REMOVED temp, ADDED schema input ---

$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Tool.schema.json
name: Reasoning LLM Tool
description: "Calls an OpenAI reasoning model. Select response format (Text/JSON). If JSON is selected, optionally provide a specific JSON schema."
type: custom_llm
category: HW_PF_tools
module: pf_reasoning_tool.tools.reasoning_tool_call
function: reasoning_llm

default_prompt: |
  # system:
  You are a helpful AI assistant designed for reasoning tasks.

  # user:
  {{question}}

inputs:
  connection:
    type: [AzureOpenAIConnection, OpenAIConnection, CustomConnection]
    description: The connection object for OpenAI or Azure OpenAI.
  deployment_name:
    type: [string]
    description: Name of the Azure OpenAI deployment (e.g., your o3-mini deployment).
  max_completion_tokens:
    type: [int]
    description: Maximum number of tokens for the completion.
    default: 5000
    optional: true
    ui_hints: {text_box_size: md}
  reasoning_effort:
    type: [string]
    description: Select the reasoning effort level for the model.
    default: "low"
    optional: true
    dynamic_list:
      func_path: pf_reasoning_tool.tools.reasoning_tool_call.get_reasoning_effort_options
      func_kwargs: []
    allow_manual_entry: false
    is_multi_select: false

  # ---> REMOVED temperature input <---

  response_format:
    type: object # Value from dropdown is an object/dict
    description: Select the desired overall output format.
    default: {"type": "text"} # Default to text
    optional: true
    dynamic_list:
      func_path: pf_reasoning_tool.tools.reasoning_tool_call.get_response_format_options
      func_kwargs: []
    allow_manual_entry: false
    is_multi_select: false

  # ---> ADDED json_schema_definition input <---
  json_schema_definition:
    type: [string] # Input is a string containing JSON
    description: "(Optional) Paste the JSON schema string here ONLY if 'JSON Object' is selected above and you want strict schema adherence."
    optional: true # Make it optional
    # Default is effectively blank/None
    ui_hints:
      text_box_size: lg # Large box for potentially large schemas

outputs:
  output:
    type: [string]
    description: The text response generated by the language model (will be JSON string if JSON format requested).