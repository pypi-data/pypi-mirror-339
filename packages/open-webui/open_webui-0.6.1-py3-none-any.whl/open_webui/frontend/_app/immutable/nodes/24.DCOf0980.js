import{s as Fe,D as Ke,E as je,a as $,d as u,f as c,i as S,g as p,n as ue,e as v,c as w,P as vt,F as ot,k as X,o as Y,y as De,A as xe,p as at,j as Le,S as it,u as fe,t as ge,b as ve,h as we,B as Be,z as wt,H as lt,q as $t,M as bt}from"../chunks/vexCXLX9.js";import{S as Pe,i as We,t as x,g as Se,c as ze,a as F,b as L,d as K,m as j,e as H,f as Ve}from"../chunks/Cdll-xsj.js";import{F as kt}from"../chunks/CU2r43ac.js";import{t as J}from"../chunks/DMk2eJ1b.js";import{g as yt}from"../chunks/7pUP5QFf.js";import{p as It}from"../chunks/C0hwxpU4.js";import{c as Et,s as Dt,u as xt,n as Vt}from"../chunks/BWfq-JMv.js";import{u as Ft,a as Ct}from"../chunks/CR7X7Jg3.js";import{b as Tt,r as Nt,e as St,f as zt,u as Mt,h as Bt,g as Pt}from"../chunks/DzTOYip9.js";import{o as Wt,v as At}from"../chunks/Dwx6w9TH.js";import{S as Ut}from"../chunks/Cmi_MrK3.js";import{e as ut}from"../chunks/DNXpXRYa.js";import{F as Lt}from"../chunks/DIM_C9WI.js";import{A as Kt,D as jt}from"../chunks/DjI4_WJ3.js";import"../chunks/CyFe254w.js";import{D as Ht,M as tt}from"../chunks/B2UduZ6H.js";import{b as Ot}from"../chunks/CgO5y2dz.js";import{f as Rt}from"../chunks/g5t9vw8M.js";import{T as rt}from"../chunks/DzHlmjPS.js";import{F as qt}from"../chunks/eoSdaunV.js";import"../chunks/aTHIJebK.js";import{M as Xt}from"../chunks/DbfJTM1S.js";import{R as ct,V as Yt}from"../chunks/CAqPUUq3.js";import{X as Gt}from"../chunks/4edIpoVY.js";import{M as Jt}from"../chunks/Bz7n5Lwu.js";import{C as Qt}from"../chunks/CzvQehHf.js";import{C as Zt}from"../chunks/Dzg7Oazf.js";import{A as el,L as tl}from"../chunks/B7bv6E6x.js";function ll(s){let e,t;return{c(){e=Ke("svg"),t=Ke("path"),this.h()},l(l){e=je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ue,o:ue,d(l){l&&u(e)}}}function rl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class sl extends Pe{constructor(e){super(),We(this,e,rl,ll,Fe,{className:0,strokeWidth:1})}}function dt(s,e,t){const l=s.slice();return l[6]=e[t],l}function mt(s){var a,i,f,_,b,h;let e,t,l,r;function o(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new Lt({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((a=s[6])==null?void 0:a.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((_=s[6])==null?void 0:_.size)??((h=(b=s[6])==null?void 0:b.meta)==null?void 0:h.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",o),t.$on("dismiss",n),{c(){e=v("div"),L(t.$$.fragment),l=X(),this.h()},l(k){e=w(k,"DIV",{class:!0});var V=$(e);K(t.$$.fragment,V),l=Y(V),V.forEach(u),this.h()},h(){c(e,"class","mt-1 px-2")},m(k,V){S(k,e,V),j(t,e,null),p(e,l),r=!0},p(k,V){var T,B,q,y,C,D;s=k;const E={};V&3&&(E.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),V&4&&(E.small=s[2]),V&2&&(E.item=s[6]),V&2&&(E.name=((T=s[6])==null?void 0:T.name)??((q=(B=s[6])==null?void 0:B.meta)==null?void 0:q.name)),V&2&&(E.size=((y=s[6])==null?void 0:y.size)??((D=(C=s[6])==null?void 0:C.meta)==null?void 0:D.size)??""),V&2&&(E.loading=s[6].status==="uploading"),t.$set(E)},i(k){r||(x(t.$$.fragment,k),r=!0)},o(k){F(t.$$.fragment,k),r=!1},d(k){k&&u(e),H(t)}}}function nl(s){let e,t,l=ut(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=mt(dt(s,l,n));const o=n=>F(r[n],1,1,()=>{r[n]=null});return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var a=$(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(u),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,a){S(n,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[a]){if(a&15){l=ut(n[1]);let i;for(i=0;i<l.length;i+=1){const f=dt(n,l,i);r[i]?(r[i].p(f,a),x(r[i],1)):(r[i]=mt(f),r[i].c(),x(r[i],1),r[i].m(e,null))}for(Se(),i=l.length;i<r.length;i+=1)o(i);ze()}},i(n){if(!t){for(let a=0;a<l.length;a+=1)x(r[a]);t=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)F(r[a]);t=!1},d(n){n&&u(e),vt(r,n)}}}function ol(s,e,t){const l=ot();let{selectedFileId:r=null}=e,{files:o=[]}=e,{small:n=!1}=e;const a=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,o=f.files),"small"in f&&t(2,n=f.small)},[r,o,n,l,a,i]}class al extends Pe{constructor(e){super(),We(this,e,ol,nl,Fe,{selectedFileId:0,files:1,small:2})}}function il(s){let e,t;return{c(){e=Ke("svg"),t=Ke("path"),this.h()},l(l){e=je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ue,o:ue,d(l){l&&u(e)}}}function cl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class fl extends Pe{constructor(e){super(),We(this,e,cl,il,Fe,{className:0,strokeWidth:1})}}function ul(s){let e,t;return{c(){e=Ke("svg"),t=Ke("path"),this.h()},l(l){e=je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ue,o:ue,d(l){l&&u(e)}}}function dl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class ml extends Pe{constructor(e){super(),We(this,e,dl,ul,Fe,{className:0,strokeWidth:1})}}function hl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(o){e=w(o,"BUTTON",{class:!0,"data-svelte-h":!0}),it(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(o,n){S(o,e,n),l||(r=fe(e,"click",s[9]),l=!0)},p:ue,d(o){o&&u(e),l=!1,r()}}}function pl(s){let e,t;return e=new rt({props:{content:s[2].t("Add Content"),$$slots:{default:[hl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const o={};r&4&&(o.content=l[2].t("Add Content")),r&4098&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function _l(s){let e,t,l,r=s[2].t("Upload files")+"",o,n;return e=new sl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=X(),l=v("div"),o=ge(r),this.h()},l(a){K(e.$$.fragment,a),t=Y(a),l=w(a,"DIV",{class:!0});var i=$(l);o=ve(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),S(a,t,i),S(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Upload files")+"")&&we(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function gl(s){let e,t,l,r=s[2].t("Upload directory")+"",o,n;return e=new qt({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=X(),l=v("div"),o=ge(r),this.h()},l(a){K(e.$$.fragment,a),t=Y(a),l=w(a,"DIV",{class:!0});var i=$(l);o=ve(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),S(a,t,i),S(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&we(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function vl(s){let e,t,l,r=s[2].t("Sync directory")+"",o,n;return e=new ml({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=X(),l=v("div"),o=ge(r),this.h()},l(a){K(e.$$.fragment,a),t=Y(a),l=w(a,"DIV",{class:!0});var i=$(l);o=ve(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),S(a,t,i),S(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&we(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function wl(s){let e,t;return e=new tt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[vl]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const o={};r&4100&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function $l(s){let e,t,l,r=s[2].t("Add text content")+"",o,n;return e=new fl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=X(),l=v("div"),o=ge(r),this.h()},l(a){K(e.$$.fragment,a),t=Y(a),l=w(a,"DIV",{class:!0});var i=$(l);o=ve(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),S(a,t,i),S(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Add text content")+"")&&we(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function bl(s){let e,t,l,r,o,n,a,i;return e=new tt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[_l]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new tt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[gl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),o=new rt({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[wl]},$$scope:{ctx:s}}}),a=new tt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[$l]},$$scope:{ctx:s}}}),a.$on("click",s[8]),{c(){L(e.$$.fragment),t=X(),L(l.$$.fragment),r=X(),L(o.$$.fragment),n=X(),L(a.$$.fragment)},l(f){K(e.$$.fragment,f),t=Y(f),K(l.$$.fragment,f),r=Y(f),K(o.$$.fragment,f),n=Y(f),K(a.$$.fragment,f)},m(f,_){j(e,f,_),S(f,t,_),j(l,f,_),S(f,r,_),j(o,f,_),S(f,n,_),j(a,f,_),i=!0},p(f,_){const b={};_&4100&&(b.$$scope={dirty:_,ctx:f}),e.$set(b);const h={};_&4100&&(h.$$scope={dirty:_,ctx:f}),l.$set(h);const k={};_&4&&(k.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),_&4100&&(k.$$scope={dirty:_,ctx:f}),o.$set(k);const V={};_&4100&&(V.$$scope={dirty:_,ctx:f}),a.$set(V)},i(f){i||(x(e.$$.fragment,f),x(l.$$.fragment,f),x(o.$$.fragment,f),x(a.$$.fragment,f),i=!0)},o(f){F(e.$$.fragment,f),F(l.$$.fragment,f),F(o.$$.fragment,f),F(a.$$.fragment,f),i=!1},d(f){f&&(u(t),u(r),u(n)),H(e,f),H(l,f),H(o,f),H(a,f)}}}function kl(s){let e,t,l;return t=new Ot({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:Rt,$$slots:{default:[bl]},$$scope:{ctx:s}}}),{c(){e=v("div"),L(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{slot:!0});var o=$(e);K(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"slot","content")},m(r,o){S(r,e,o),j(t,e,null),l=!0},p(r,o){const n={};o&4100&&(n.$$scope={dirty:o,ctx:r}),t.$set(n)},i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),H(t)}}}function yl(s){let e,t,l;function r(n){s[10](n)}let o={align:"end",$$slots:{content:[kl],default:[pl]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.show=s[1]),e=new Ht({props:o}),De.push(()=>Ve(e,"show",r)),e.$on("change",s[11]),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){j(e,n,a),l=!0},p(n,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:n}),!t&&a&2&&(t=!0,i.show=n[1],xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Il(s,e,t){let l;const r=ot(),o=at("i18n");Le(s,o,E=>t(2,l=E));let{onClose:n=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},_=()=>{r("sync",{type:"directory"})},b=()=>{r("upload",{type:"text"})},h=E=>{E.stopPropagation(),t(1,a=!0)};function k(E){a=E,t(1,a)}const V=E=>{E.detail===!1&&n()};return s.$$set=E=>{"onClose"in E&&t(0,n=E.onClose)},[n,a,l,r,o,i,f,_,b,h,k,V]}class El extends Pe{constructor(e){super(),We(this,e,Il,yl,Fe,{onClose:0})}}function Dl(s){let e,t;return e=new rt({props:{content:s[4].t("Voice Input"),$$slots:{default:[Vl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const o={};r&16&&(o.content=l[4].t("Voice Input")),r&65560&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function xl(s){let e,t,l,r;function o(a){s[10](a)}let n={className:"p-1"};return s[3]!==void 0&&(n.recording=s[3]),t=new Yt({props:n}),De.push(()=>Ve(t,"recording",o)),t.$on("cancel",s[11]),t.$on("confirm",s[12]),{c(){e=v("div"),L(t.$$.fragment),this.h()},l(a){e=w(a,"DIV",{class:!0});var i=$(e);K(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","max-w-full w-full")},m(a,i){S(a,e,i),j(t,e,null),r=!0},p(a,i){const f={};!l&&i&8&&(l=!0,f.recording=a[3],xe(()=>l=!1)),t.$set(f)},i(a){r||(x(t.$$.fragment,a),r=!0)},o(a){F(t.$$.fragment,a),r=!1},d(a){a&&u(e),H(t)}}}function Vl(s){let e,t,l,r,o;return t=new Jt({props:{className:"size-5"}}),{c(){e=v("button"),L(t.$$.fragment),this.h()},l(n){e=w(n,"BUTTON",{class:!0,type:!0});var a=$(e);K(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,a){S(n,e,a),j(t,e,null),l=!0,r||(o=fe(e,"click",s[13]),r=!0)},p:ue,i(n){l||(x(t.$$.fragment,n),l=!0)},o(n){F(t.$$.fragment,n),l=!1},d(n){n&&u(e),H(t),r=!1,o()}}}function Fl(s){let e,t=s[4].t("Save")+"",l;return{c(){e=v("button"),l=ge(t),this.h()},l(r){e=w(r,"BUTTON",{class:!0,type:!0});var o=$(e);l=ve(o,t),o.forEach(u),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,o){S(r,e,o),p(e,l)},p(r,o){o&16&&t!==(t=r[4].t("Save")+"")&&we(l,t)},d(r){r&&u(e)}}}function Cl(s){let e,t,l,r,o,n,a,i,f,_,b,h,k,V,E,T,B,q,y,C,D,W,U,m,g,P,O;l=new Gt({props:{className:"size-3.5"}});function G(z){s[9](z)}let re={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(re.value=s[2]),E=new ct({props:re}),De.push(()=>Ve(E,"value",G));const oe=[xl,Dl],Q=[];function de(z,Z){return z[3]?0:1}return C=de(s),D=Q[C]=oe[C](s),m=new rt({props:{content:s[4].t("Save"),$$slots:{default:[Fl]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("button"),L(l.$$.fragment),r=X(),o=v("div"),n=v("form"),a=v("div"),i=v("div"),f=v("div"),_=v("div"),b=v("input"),k=X(),V=v("div"),L(E.$$.fragment),B=X(),q=v("div"),y=v("div"),D.c(),W=X(),U=v("div"),L(m.$$.fragment),this.h()},l(z){e=w(z,"DIV",{class:!0});var Z=$(e);t=w(Z,"BUTTON",{class:!0,type:!0});var te=$(t);K(l.$$.fragment,te),te.forEach(u),Z.forEach(u),r=Y(z),o=w(z,"DIV",{class:!0});var me=$(o);n=w(me,"FORM",{class:!0});var he=$(n);a=w(he,"DIV",{class:!0});var $e=$(a);i=w($e,"DIV",{class:!0});var ae=$(i);f=w(ae,"DIV",{class:!0});var Ce=$(f);_=w(Ce,"DIV",{class:!0});var ie=$(_);b=w(ie,"INPUT",{class:!0,type:!0,placeholder:!0}),ie.forEach(u),Ce.forEach(u),k=Y(ae),V=w(ae,"DIV",{class:!0});var ce=$(V);K(E.$$.fragment,ce),ce.forEach(u),ae.forEach(u),$e.forEach(u),B=Y(he),q=w(he,"DIV",{class:!0});var be=$(q);y=w(be,"DIV",{class:!0});var _e=$(y);D.l(_e),_e.forEach(u),W=Y(be),U=w(be,"DIV",{class:!0});var Me=$(U);K(m.$$.fragment,Me),Me.forEach(u),be.forEach(u),he.forEach(u),me.forEach(u),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c(b,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c(b,"type","text"),c(b,"placeholder",h=s[4].t("Title")),b.required=!0,c(_,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(V,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(y,"class",""),c(U,"class","shrink-0"),c(q,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(o,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(z,Z){S(z,e,Z),p(e,t),j(l,t,null),S(z,r,Z),S(z,o,Z),p(o,n),p(n,a),p(a,i),p(i,f),p(f,_),p(_,b),Be(b,s[1]),p(i,k),p(i,V),j(E,V,null),p(n,B),p(n,q),p(q,y),Q[C].m(y,null),p(q,W),p(q,U),j(m,U,null),g=!0,P||(O=[fe(t,"click",s[7]),fe(b,"input",s[8]),fe(n,"submit",wt(s[14]))],P=!0)},p(z,Z){(!g||Z&16&&h!==(h=z[4].t("Title")))&&c(b,"placeholder",h),Z&2&&b.value!==z[1]&&Be(b,z[1]);const te={};Z&16&&(te.placeholder=z[4].t("Write something...")),!T&&Z&4&&(T=!0,te.value=z[2],xe(()=>T=!1)),E.$set(te);let me=C;C=de(z),C===me?Q[C].p(z,Z):(Se(),F(Q[me],1,1,()=>{Q[me]=null}),ze(),D=Q[C],D?D.p(z,Z):(D=Q[C]=oe[C](z),D.c()),x(D,1),D.m(y,null));const he={};Z&16&&(he.content=z[4].t("Save")),Z&65552&&(he.$$scope={dirty:Z,ctx:z}),m.$set(he)},i(z){g||(x(l.$$.fragment,z),x(E.$$.fragment,z),x(D),x(m.$$.fragment,z),g=!0)},o(z){F(l.$$.fragment,z),F(E.$$.fragment,z),F(D),F(m.$$.fragment,z),g=!1},d(z){z&&(u(e),u(r),u(o)),H(l),H(E),Q[C].d(),H(m),P=!1,lt(O)}}}function Tl(s){let e,t,l;function r(n){s[15](n)}let o={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Cl]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.show=s[0]),e=new Xt({props:o}),De.push(()=>Ve(e,"show",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){j(e,n,a),l=!0},p(n,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:n}),!t&&a&1&&(t=!0,i.show=n[0],xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Nl(s,e,t){let l;const r=at("i18n");Le(s,r,y=>t(4,l=y));const o=ot();let{show:n=!1}=e,a="Untitled",i="",f=!1;const _=()=>{t(0,n=!1)};function b(){a=this.value,t(1,a)}function h(y){i=y,t(2,i)}function k(y){f=y,t(3,f)}const V=()=>{t(3,f=!1)},E=y=>{const{text:C,filename:D}=y.detail;t(2,i=`${i}${C} `),t(3,f=!1)},T=async()=>{try{let y=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(C){return J.error(l.t("Permission denied when accessing microphone: {{error}}",{error:C})),null});y&&(t(3,f=!0),y.getTracks().forEach(D=>D.stop())),y=null}catch{J.error(l.t("Permission denied when accessing microphone"))}},B=()=>{if(a.trim()===""||i.trim()===""){J.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}o("submit",{name:a,content:i}),t(0,n=!1),t(1,a=""),t(2,i="")};function q(y){n=y,t(0,n)}return s.$$set=y=>{"show"in y&&t(0,n=y.show)},[n,a,i,f,l,r,o,_,b,h,k,V,E,T,B,q]}class Sl extends Pe{constructor(e){super(),We(this,e,Nl,Tl,Fe,{show:0})}}function ht(s){let e,t,l,r,o,n,a;return o=new Kt({props:{$$slots:{default:[zl]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),L(o.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=$(e);t=w(f,"DIV",{class:!0});var _=$(t);l=w(_,"DIV",{class:!0});var b=$(l);r=w(b,"DIV",{class:!0});var h=$(r);K(o.$$.fragment,h),h.forEach(u),b.forEach(u),_.forEach(u),f.forEach(u),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",n="fixed "+(s[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){S(i,e,f),p(e,t),p(t,l),p(l,r),j(o,r,null),a=!0},p(i,f){const _={};f[2]&16&&(_.$$scope={dirty:f,ctx:i}),o.$set(_),(!a||f[0]&8192&&n!==(n="fixed "+(i[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",n)},i(i){a||(x(o.$$.fragment,i),a=!0)},o(i){F(o.$$.fragment,i),a=!1},d(i){i&&u(e),H(o)}}}function zl(s){let e,t="Drop any files here to add to my documents";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),it(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){S(l,e,r)},p:ue,d(l){l&&u(e)}}}function Ml(s){let e,t;return e=new Ut({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ue,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Bl(s){var Je,Qe,Ze,et;let e,t,l,r,o,n,a,i,f,_,b,h,k,V,E,T,B=s[12].t("Access")+"",q,y,C,D,W,U,m,g,P,O,G,re,oe,Q,de,z='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',Z,te,me,he,$e,ae,Ce,ie,ce,be,_e,Me,Re;function st(I){s[32](I)}function nt(I){s[33](I)}let He={allowPublic:((Ze=(Qe=(Je=s[14])==null?void 0:Je.permissions)==null?void 0:Qe.sharing)==null?void 0:Ze.public_knowledge)||((et=s[14])==null?void 0:et.role)==="admin",onChange:s[31],accessRoles:["read","write"]};s[7]!==void 0&&(He.show=s[7]),s[0].access_control!==void 0&&(He.accessControl=s[0].access_control),e=new el({props:He}),De.push(()=>Ve(e,"show",st)),De.push(()=>Ve(e,"accessControl",nt)),V=new tl({props:{strokeWidth:"2.5",className:"size-3.5"}});const qe=[Wl,Pl],ke=[];function Xe(I,ee){return I[3]?0:!I[3]&&I[2]!==null?1:-1}~(m=Xe(s))&&(g=ke[m]=qe[m](s)),ae=new El({}),ae.$on("upload",s[48]),ae.$on("sync",s[49]);const Ye=[jl,Kl],ye=[];function Ge(I,ee){return I[9].length>0?0:1}return ie=Ge(s),ce=ye[ie]=Ye[ie](s),{c(){L(e.$$.fragment),r=X(),o=v("div"),n=v("div"),a=v("div"),i=v("div"),f=v("div"),_=v("input"),b=X(),h=v("div"),k=v("button"),L(V.$$.fragment),E=X(),T=v("div"),q=ge(B),y=X(),C=v("div"),D=v("input"),W=X(),U=v("div"),g&&g.c(),P=X(),O=v("div"),G=v("div"),re=v("div"),oe=v("div"),Q=v("div"),de=v("div"),de.innerHTML=z,Z=X(),te=v("input"),he=X(),$e=v("div"),L(ae.$$.fragment),Ce=X(),ce.c(),this.h()},l(I){K(e.$$.fragment,I),r=Y(I),o=w(I,"DIV",{class:!0});var ee=$(o);n=w(ee,"DIV",{class:!0});var Te=$(n);a=w(Te,"DIV",{class:!0});var Ie=$(a);i=w(Ie,"DIV",{class:!0});var Ee=$(i);f=w(Ee,"DIV",{class:!0});var Ae=$(f);_=w(Ae,"INPUT",{type:!0,class:!0,placeholder:!0}),Ae.forEach(u),b=Y(Ee),h=w(Ee,"DIV",{class:!0});var Ue=$(h);k=w(Ue,"BUTTON",{class:!0,type:!0});var Ne=$(k);K(V.$$.fragment,Ne),E=Y(Ne),T=w(Ne,"DIV",{class:!0});var d=$(T);q=ve(d,B),d.forEach(u),Ne.forEach(u),Ue.forEach(u),Ee.forEach(u),y=Y(Ie),C=w(Ie,"DIV",{class:!0});var N=$(C);D=w(N,"INPUT",{type:!0,class:!0,placeholder:!0}),N.forEach(u),Ie.forEach(u),Te.forEach(u),ee.forEach(u),W=Y(I),U=w(I,"DIV",{class:!0});var M=$(U);g&&g.l(M),P=Y(M),O=w(M,"DIV",{class:!0});var A=$(O);G=w(A,"DIV",{class:!0});var le=$(G);re=w(le,"DIV",{class:!0});var se=$(re);oe=w(se,"DIV",{class:!0});var pe=$(oe);Q=w(pe,"DIV",{class:!0});var R=$(Q);de=w(R,"DIV",{class:!0,"data-svelte-h":!0}),it(de)!=="svelte-or7cnz"&&(de.innerHTML=z),Z=Y(R),te=w(R,"INPUT",{class:!0,placeholder:!0}),he=Y(R),$e=w(R,"DIV",{});var ne=$($e);K(ae.$$.fragment,ne),ne.forEach(u),R.forEach(u),pe.forEach(u),Ce=Y(se),ce.l(se),se.forEach(u),le.forEach(u),A.forEach(u),M.forEach(u),this.h()},h(){c(_,"type","text"),c(_,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(_,"placeholder","Knowledge Name"),c(f,"class","w-full"),c(T,"class","text-sm font-medium shrink-0"),c(k,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(k,"type","button"),c(h,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(D,"type","text"),c(D,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(D,"placeholder","Knowledge Description"),c(C,"class","flex w-full px-1"),c(a,"class","flex-1"),c(n,"class","flex w-full"),c(o,"class","w-full mb-2.5"),c(de,"class","self-center ml-1 mr-3"),c(te,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(te,"placeholder",me=s[12].t("Search Collection")),c(Q,"class","flex mb-0.5"),c(oe,"class","px-3"),c(re,"class","w-full h-full flex flex-col"),c(G,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(O,"class",be=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(U,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(I,ee){j(e,I,ee),S(I,r,ee),S(I,o,ee),p(o,n),p(n,a),p(a,i),p(i,f),p(f,_),Be(_,s[0].name),p(i,b),p(i,h),p(h,k),j(V,k,null),p(k,E),p(k,T),p(T,q),p(a,y),p(a,C),p(C,D),Be(D,s[0].description),S(I,W,ee),S(I,U,ee),~m&&ke[m].m(U,null),p(U,P),p(U,O),p(O,G),p(G,re),p(re,oe),p(oe,Q),p(Q,de),p(Q,Z),p(Q,te),Be(te,s[1]),p(Q,he),p(Q,$e),j(ae,$e,null),p(re,Ce),ye[ie].m(re,null),_e=!0,Me||(Re=[fe(_,"input",s[34]),fe(_,"input",s[35]),fe(k,"click",s[36]),fe(D,"input",s[37]),fe(D,"input",s[38]),fe(te,"input",s[46]),fe(te,"focus",s[47])],Me=!0)},p(I,ee){var Ae,Ue,Ne,d;const Te={};ee[0]&16384&&(Te.allowPublic=((Ne=(Ue=(Ae=I[14])==null?void 0:Ae.permissions)==null?void 0:Ue.sharing)==null?void 0:Ne.public_knowledge)||((d=I[14])==null?void 0:d.role)==="admin"),!t&&ee[0]&128&&(t=!0,Te.show=I[7],xe(()=>t=!1)),!l&&ee[0]&1&&(l=!0,Te.accessControl=I[0].access_control,xe(()=>l=!1)),e.$set(Te),ee[0]&1&&_.value!==I[0].name&&Be(_,I[0].name),(!_e||ee[0]&4096)&&B!==(B=I[12].t("Access")+"")&&we(q,B),ee[0]&1&&D.value!==I[0].description&&Be(D,I[0].description);let Ie=m;m=Xe(I),m===Ie?~m&&ke[m].p(I,ee):(g&&(Se(),F(ke[Ie],1,1,()=>{ke[Ie]=null}),ze()),~m?(g=ke[m],g?g.p(I,ee):(g=ke[m]=qe[m](I),g.c()),x(g,1),g.m(U,P)):g=null),(!_e||ee[0]&4096&&me!==(me=I[12].t("Search Collection")))&&c(te,"placeholder",me),ee[0]&2&&te.value!==I[1]&&Be(te,I[1]);let Ee=ie;ie=Ge(I),ie===Ee?ye[ie].p(I,ee):(Se(),F(ye[Ee],1,1,()=>{ye[Ee]=null}),ze(),ce=ye[ie],ce?ce.p(I,ee):(ce=ye[ie]=Ye[ie](I),ce.c()),x(ce,1),ce.m(re,null)),(!_e||ee[0]&8&&be!==(be=(I[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(O,"class",be)},i(I){_e||(x(e.$$.fragment,I),x(V.$$.fragment,I),x(g),x(ae.$$.fragment,I),x(ce),_e=!0)},o(I){F(e.$$.fragment,I),F(V.$$.fragment,I),F(g),F(ae.$$.fragment,I),F(ce),_e=!1},d(I){I&&(u(r),u(o),u(W),u(U)),H(e,I),H(V),~m&&ke[m].d(),H(ae),ye[ie].d(),Me=!1,lt(Re)}}}function Pl(s){let e,t;return e=new jt({props:{className:"h-full",show:s[2]!==null,$$slots:{default:[Al]},$$scope:{ctx:s}}}),e.$on("close",s[45]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const o={};r[0]&4&&(o.show=l[2]!==null),r[0]&5124|r[2]&16&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Wl(s){let e,t,l,r;const o=[Ll,Ul],n=[];function a(i,f){return i[10]?0:1}return t=a(s),l=n[t]=o[t](s),{c(){e=v("div"),l.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var f=$(e);l.l(f),f.forEach(u),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){S(i,e,f),n[t].m(e,null),r=!0},p(i,f){let _=t;t=a(i),t===_?n[t].p(i,f):(Se(),F(n[_],1,1,()=>{n[_]=null}),ze(),l=n[t],l?l.p(i,f):(l=n[t]=o[t](i),l.c()),x(l,1),l.m(e,null))},i(i){r||(x(l),r=!0)},o(i){F(l),r=!1},d(i){i&&u(e),n[t].d()}}}function pt(s){let e,t,l;function r(n){s[44](n)}let o={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(o.value=s[10].data.content),e=new ct({props:o}),De.push(()=>Ve(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){j(e,n,a),l=!0},p(n,a){const i={};a[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&a[0]&1024&&(t=!0,i.value=n[10].data.content,xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Al(s){var U,m;let e,t,l,r,o,n,a,i,f=((m=(U=s[10])==null?void 0:U.meta)==null?void 0:m.name)+"",_,b,h,k,V=s[12].t("Save")+"",E,T,B,q=s[10].id,y,C,D;n=new Zt({props:{strokeWidth:"2.5"}});let W=pt(s);return{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),o=v("button"),L(n.$$.fragment),a=X(),i=v("div"),_=ge(f),b=X(),h=v("div"),k=v("button"),E=ge(V),T=X(),B=v("div"),W.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var P=$(e);t=w(P,"DIV",{class:!0});var O=$(t);l=w(O,"DIV",{class:!0});var G=$(l);r=w(G,"DIV",{class:!0});var re=$(r);o=w(re,"BUTTON",{class:!0});var oe=$(o);K(n.$$.fragment,oe),oe.forEach(u),re.forEach(u),a=Y(G),i=w(G,"DIV",{class:!0});var Q=$(i);_=ve(Q,f),Q.forEach(u),b=Y(G),h=w(G,"DIV",{});var de=$(h);k=w(de,"BUTTON",{class:!0});var z=$(k);E=ve(z,V),z.forEach(u),de.forEach(u),G.forEach(u),T=Y(O),B=w(O,"DIV",{class:!0});var Z=$(B);W.l(Z),Z.forEach(u),O.forEach(u),P.forEach(u),this.h()},h(){c(o,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(k,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(B,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(g,P){S(g,e,P),p(e,t),p(t,l),p(l,r),p(r,o),j(n,o,null),p(l,a),p(l,i),p(i,_),p(l,b),p(l,h),p(h,k),p(k,E),p(t,T),p(t,B),W.m(B,null),y=!0,C||(D=[fe(o,"click",s[42]),fe(k,"click",s[43])],C=!0)},p(g,P){var O,G;(!y||P[0]&1024)&&f!==(f=((G=(O=g[10])==null?void 0:O.meta)==null?void 0:G.name)+"")&&we(_,f),(!y||P[0]&4096)&&V!==(V=g[12].t("Save")+"")&&we(E,V),P[0]&1024&&Fe(q,q=g[10].id)?(Se(),F(W,1,1,ue),ze(),W=pt(g),W.c(),x(W,1),W.m(B,null)):W.p(g,P)},i(g){y||(x(n.$$.fragment,g),x(W),y=!0)},o(g){F(n.$$.fragment,g),F(W),y=!1},d(g){g&&u(e),H(n),W.d(g),C=!1,lt(D)}}}function Ul(s){let e,t,l=s[12].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=v("div"),t=v("div"),r=ge(l),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{class:!0});var a=$(t);r=ve(a,l),a.forEach(u),n.forEach(u),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(o,n){S(o,e,n),p(e,t),p(t,r)},p(o,n){n[0]&4096&&l!==(l=o[12].t("Drag and drop a file to upload or select a file to view")+"")&&we(r,l)},i:ue,o:ue,d(o){o&&u(e)}}}function Ll(s){var W,U;let e,t,l,r,o,n=decodeURIComponent((U=(W=s[10])==null?void 0:W.meta)==null?void 0:U.name)+"",a,i,f,_,b,h=s[12].t("Save")+"",k,V,E,T=s[10].id,B,q,y,C=!Ol,D=_t(s);return{c(){e=v("div"),t=v("div"),l=X(),r=v("div"),o=v("a"),a=ge(n),f=X(),_=v("div"),b=v("button"),k=ge(h),V=X(),E=v("div"),D.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var g=$(e);t=w(g,"DIV",{class:!0});var P=$(t);l=Y(P),r=w(P,"DIV",{class:!0});var O=$(r);o=w(O,"A",{class:!0,href:!0,target:!0});var G=$(o);a=ve(G,n),G.forEach(u),O.forEach(u),f=Y(P),_=w(P,"DIV",{});var re=$(_);b=w(re,"BUTTON",{class:!0});var oe=$(b);k=ve(oe,h),oe.forEach(u),re.forEach(u),P.forEach(u),V=Y(g),E=w(g,"DIV",{class:!0});var Q=$(E);D.l(Q),Q.forEach(u),g.forEach(u),this.h()},h(){c(o,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(o,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(o,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c(b,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","shrink-0 mb-2 flex items-center"),c(E,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(m,g){S(m,e,g),p(e,t),p(t,l),p(t,r),p(r,o),p(o,a),p(t,f),p(t,_),p(_,b),p(b,k),p(e,V),p(e,E),D.m(E,null),B=!0,q||(y=fe(b,"click",s[40]),q=!0)},p(m,g){var P,O;(!B||g[0]&1024)&&n!==(n=decodeURIComponent((O=(P=m[10])==null?void 0:P.meta)==null?void 0:O.name)+"")&&we(a,n),(!B||g[0]&1024&&i!==(i=m[10].id?`/api/v1/files/${m[10].id}/content`:"#"))&&c(o,"href",i),(!B||g[0]&4096)&&h!==(h=m[12].t("Save")+"")&&we(k,h),g[0]&1024&&Fe(T,T=m[10].id)?(Se(),F(D,1,1,ue),ze(),D=_t(m),D.c(),x(D,1),D.m(E,null)):D.p(m,g)},i(m){B||(x(C),x(D),B=!0)},o(m){F(C),F(D),B=!1},d(m){m&&u(e),D.d(m),q=!1,y()}}}function _t(s){let e,t,l;function r(n){s[41](n)}let o={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(o.value=s[10].data.content),e=new ct({props:o}),De.push(()=>Ve(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){j(e,n,a),l=!0},p(n,a){const i={};a[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&a[0]&1024&&(t=!0,i.value=n[10].data.content,xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Kl(s){let e,t,l=s[12].t("No content found")+"",r;return{c(){e=v("div"),t=v("div"),r=ge(l),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{});var a=$(t);r=ve(a,l),a.forEach(u),n.forEach(u),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(o,n){S(o,e,n),p(e,t),p(t,r)},p(o,n){n[0]&4096&&l!==(l=o[12].t("No content found")+"")&&we(r,l)},i:ue,o:ue,d(o){o&&u(e)}}}function jl(s){let e,t,l;return t=new al({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[50]),t.$on("delete",s[51]),{c(){e=v("div"),L(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var o=$(e);K(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,o){S(r,e,o),j(t,e,null),l=!0},p(r,o){const n={};o[0]&512&&(n.files=r[9]),o[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),H(t)}}}function Hl(s){let e,t,l,r,o,n,a,i,f,_,b,h,k,V,E,T=s[11]&&ht(s);function B(m){s[25](m)}let q={message:s[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(q.show=s[6]),t=new Qt({props:q}),De.push(()=>Ve(t,"show",B)),t.$on("confirm",s[26]);function y(m){s[27](m)}let C={};s[5]!==void 0&&(C.show=s[5]),o=new Sl({props:C}),De.push(()=>Ve(o,"show",y)),o.$on("submit",s[28]);const D=[Bl,Ml],W=[];function U(m,g){return m[4]&&m[0]?0:1}return b=U(s),h=W[b]=D[b](s),{c(){T&&T.c(),e=X(),L(t.$$.fragment),r=X(),L(o.$$.fragment),a=X(),i=v("input"),f=X(),_=v("div"),h.c(),this.h()},l(m){T&&T.l(m),e=Y(m),K(t.$$.fragment,m),r=Y(m),K(o.$$.fragment,m),a=Y(m),i=w(m,"INPUT",{id:!0,type:!0}),f=Y(m),_=w(m,"DIV",{class:!0,id:!0});var g=$(_);h.l(g),g.forEach(u),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(_,"class","flex flex-col w-full translate-y-1"),c(_,"id","collection-container")},m(m,g){T&&T.m(m,g),S(m,e,g),j(t,m,g),S(m,r,g),j(o,m,g),S(m,a,g),S(m,i,g),S(m,f,g),S(m,_,g),W[b].m(_,null),k=!0,V||(E=[fe(i,"change",s[29]),fe(i,"change",s[30])],V=!0)},p(m,g){m[11]?T?(T.p(m,g),g[0]&2048&&x(T,1)):(T=ht(m),T.c(),x(T,1),T.m(e.parentNode,e)):T&&(Se(),F(T,1,1,()=>{T=null}),ze());const P={};g[0]&4096&&(P.message=m[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&g[0]&64&&(l=!0,P.show=m[6],xe(()=>l=!1)),t.$set(P);const O={};!n&&g[0]&32&&(n=!0,O.show=m[5],xe(()=>n=!1)),o.$set(O);let G=b;b=U(m),b===G?W[b].p(m,g):(Se(),F(W[G],1,1,()=>{W[G]=null}),ze(),h=W[b],h?h.p(m,g):(h=W[b]=D[b](m),h.c()),x(h,1),h.m(_,null))},i(m){k||(x(T),x(t.$$.fragment,m),x(o.$$.fragment,m),x(h),k=!0)},o(m){F(T),F(t.$$.fragment,m),F(o.$$.fragment,m),F(h),k=!1},d(m){m&&(u(e),u(r),u(a),u(i),u(f),u(_)),T&&T.d(m),H(t,m),H(o,m),W[b].d(),V=!1,lt(E)}}}let Ol=!0;function Rl(s,e,t){let l,r,o,n,a;Le(s,It,d=>t(55,l=d)),Le(s,Et,d=>t(56,o=d)),Le(s,Dt,d=>t(13,n=d)),Le(s,xt,d=>t(14,a=d));const i=at("i18n");Le(s,i,d=>t(12,r=d));let f=!0,_,b=null,h=null,k="",V=!1,E=!1,T=!1,B=null,q=[],y=null,C=null,D=null,W=null,U,m=!1;const g=(d,N)=>{const M=new Blob([N],{type:"text/plain"}),A=Wt(M,`${d}.txt`);return console.log(A),A},P=async d=>{var A,le,se,pe;console.log(d);const N=At(),M={type:"file",file:"",id:null,url:"",name:d.name,size:d.size,status:"uploading",error:"",itemId:N};if(M.size==0)return J.error(r.t("You cannot upload an empty file.")),null;if((((A=o==null?void 0:o.file)==null?void 0:A.max_size)??null)!==null&&d.size>(((le=o==null?void 0:o.file)==null?void 0:le.max_size)??0)*1024*1024){console.log("File exceeds max size limit:",{fileSize:d.size,maxSize:(((se=o==null?void 0:o.file)==null?void 0:se.max_size)??0)*1024*1024}),J.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(pe=o==null?void 0:o.file)==null?void 0:pe.max_size}));return}t(0,h.files=[...h.files??[],M],h);try{const R=await Ft(localStorage.token,d).catch(ne=>(J.error(`${ne}`),null));R?(console.log(R),t(0,h.files=h.files.map(ne=>(ne.itemId===N&&(ne.id=R.id),delete ne.itemId,ne)),h),await z(R.id)):J.error(r.t("Failed to upload file."))}catch(R){J.error(`${R}`)}},O=async()=>{const d="showDirectoryPicker"in window;try{d?await re():await oe()}catch(N){Q(N)}},G=d=>d.split("/").some(N=>N.startsWith(".")),re=async()=>{const d=await window.showDirectoryPicker();let N=0,M=0;const A=()=>{const pe=M/N*100;J.info(`Upload Progress: ${M}/${N} (${pe.toFixed(2)}%)`)};async function le(pe){for await(const R of pe.values())R.name.startsWith(".")||(R.kind==="file"?N++:R.kind==="directory"&&(R.name.startsWith(".")||await le(R)))}async function se(pe,R=""){for await(const ne of pe.values()){if(ne.name.startsWith("."))continue;const Oe=R?`${R}/${ne.name}`:ne.name;if(!G(Oe))if(ne.kind==="file"){const ft=await ne.getFile(),gt=new File([ft],Oe,{type:ft.type});await P(gt),M++,A()}else ne.kind==="directory"&&(ne.name.startsWith(".")||await se(ne,Oe))}}await le(d),A(),N>0?await se(d):console.log("No files to upload.")},oe=async()=>new Promise((d,N)=>{const M=document.createElement("input");M.type="file",M.webkitdirectory=!0,M.directory=!0,M.multiple=!0,M.style.display="none",document.body.appendChild(M),M.onchange=async()=>{try{const A=Array.from(M.files).filter(R=>!G(R.webkitRelativePath));let le=A.length,se=0;const pe=()=>{const R=se/le*100;J.info(`Upload Progress: ${se}/${le} (${R.toFixed(2)}%)`)};pe();for(const R of A)if(!R.name.startsWith(".")){const ne=R.webkitRelativePath||R.name,Oe=new File([R],ne,{type:R.type});await P(Oe),se++,pe()}document.body.removeChild(M),d()}catch(A){N(A)}},M.onerror=A=>{document.body.removeChild(M),N(A)},M.click()}),Q=d=>{d.name==="AbortError"?J.info("Directory selection was cancelled"):(J.error("Error accessing directory"),console.error("Directory access error:",d))},de=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const d=await Nt(localStorage.token,b).catch(N=>{J.error(`${N}`)});d&&(t(0,h=d),J.success(r.t("Knowledge reset successfully.")),O())}else O()},z=async d=>{const N=await St(localStorage.token,b,d).catch(M=>(J.error(`${M}`),null));N?(t(0,h=N),J.success(r.t("File added successfully."))):(J.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(M=>M.id!==d),h))},Z=async d=>{try{console.log("Starting file deletion process for:",d);const N=await zt(localStorage.token,b,d);console.log("Knowledge base updated:",N),N&&(t(0,h=N),J.success(r.t("File removed successfully.")))}catch(N){console.error("Error in deleteFileHandler:",N),J.error(`${N}`)}},te=async()=>{const d=y.id,N=y.data.content,M=Ct(localStorage.token,d,N).catch(le=>{J.error(`${le}`)}),A=await Mt(localStorage.token,b,d).catch(le=>{J.error(`${le}`)});M&&A&&(t(0,h=A),J.success(r.t("File content updated successfully.")))},me=()=>{console.log("debounce"),W&&clearTimeout(W),W=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){J.error(r.t("Please fill in all fields."));return}await Bt(localStorage.token,b,{...h,name:h.name,description:h.description,access_control:h.access_control}).catch(N=>{J.error(`${N}`)})&&(J.success(r.t("Knowledge updated successfully")),Vt.set(await Pt(localStorage.token)))},1e3)},he=async d=>{d.matches?t(3,f=!0):t(3,f=!1)},$e=d=>{var N,M;d.preventDefault(),(M=(N=d.dataTransfer)==null?void 0:N.types)!=null&&M.includes("Files")?t(11,m=!0):t(11,m=!1)},ae=()=>{t(11,m=!1)},Ce=async d=>{var N,M,A,le;if(d.preventDefault(),t(11,m=!1),(M=(N=d.dataTransfer)==null?void 0:N.types)!=null&&M.includes("Files")&&(A=d.dataTransfer)!=null&&A.files){const se=(le=d.dataTransfer)==null?void 0:le.files;if(se&&se.length>0)for(const pe of se)await P(pe);else J.error(r.t("File not found."))}};$t(async()=>{U=window.matchMedia("(min-width: 1024px)"),U.addEventListener("change",he),he(U);const d=document.getElementById("collection-container");f&&Math.floor(300/d.clientWidth*100),new ResizeObserver(le=>{for(let se of le)se.contentRect.width}).observe(d),t(4,b=l.params.id);const M=await Tt(localStorage.token,b).catch(le=>(J.error(`${le}`),null));M?t(0,h=M):yt("/workspace/knowledge");const A=document.querySelector("body");A==null||A.addEventListener("dragover",$e),A==null||A.addEventListener("drop",Ce),A==null||A.addEventListener("dragleave",ae)}),bt(()=>{U==null||U.removeEventListener("change",he);const d=document.querySelector("body");d==null||d.removeEventListener("dragover",$e),d==null||d.removeEventListener("drop",Ce),d==null||d.removeEventListener("dragleave",ae)});function ie(d){E=d,t(6,E)}const ce=()=>{de()};function be(d){V=d,t(5,V)}const _e=d=>{const N=g(d.detail.name,d.detail.content);P(N)};function Me(){B=this.files,t(8,B)}const Re=async()=>{if(B&&B.length>0){for(const N of B)await P(N);t(8,B=null);const d=document.getElementById("files-input");d&&(d.value="")}else J.error(r.t("File not found."))},st=()=>{me()};function nt(d){T=d,t(7,T)}function He(d){s.$$.not_equal(h.access_control,d)&&(h.access_control=d,t(0,h))}function qe(){h.name=this.value,t(0,h)}const ke=()=>{me()},Xe=()=>{t(7,T=!0)};function Ye(){h.description=this.value,t(0,h)}const ye=()=>{me()},Ge=()=>{_.expand()},Je=()=>{te()};function Qe(d){s.$$.not_equal(y.data.content,d)&&(y.data.content=d,t(10,y),t(2,C),t(0,h))}const Ze=()=>{t(2,C=null)},et=()=>{te()};function I(d){s.$$.not_equal(y.data.content,d)&&(y.data.content=d,t(10,y),t(2,C),t(0,h))}const ee=()=>{t(2,C=null)};function Te(){k=this.value,t(1,k)}const Ie=()=>{t(2,C=null)},Ee=d=>{d.detail.type==="directory"?O():d.detail.type==="text"?t(5,V=!0):document.getElementById("files-input").click()},Ae=d=>{t(6,E=!0)},Ue=d=>{t(2,C=C===d.detail?null:d.detail)},Ne=d=>{console.log(d.detail),t(2,C=null),Z(d.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&h&&h.files&&t(24,D=new kt(h.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&16777219&&D&&t(9,q=k?D.search(k).map(d=>d.item):(h==null?void 0:h.files)??[]),s.$$.dirty[0]&5)if(C){const d=((h==null?void 0:h.files)??[]).find(N=>N.id===C);d?(d.data=d.data??{content:""},t(10,y=d)):t(10,y=null)}else t(10,y=null)},[h,k,C,f,b,V,E,T,B,q,y,m,r,n,a,i,_,g,P,O,de,Z,te,me,D,ie,ce,be,_e,Me,Re,st,nt,He,qe,ke,Xe,Ye,ye,Ge,Je,Qe,Ze,et,I,ee,Te,Ie,Ee,Ae,Ue,Ne]}class ql extends Pe{constructor(e){super(),We(this,e,Rl,Hl,Fe,{},null,[-1,-1,-1])}}function Xl(s){let e,t;return e=new ql({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ue,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}class yr extends Pe{constructor(e){super(),We(this,e,null,Xl,Fe,{})}}export{yr as component};
//# sourceMappingURL=24.DCOf0980.js.map
