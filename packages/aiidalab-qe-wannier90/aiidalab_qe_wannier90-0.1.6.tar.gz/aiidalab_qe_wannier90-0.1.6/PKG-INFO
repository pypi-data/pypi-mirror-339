Metadata-Version: 2.4
Name: aiidalab-qe-wannier90
Version: 0.1.6
Summary: Web GUI for Quantum ESPRESSO and Wannier90 calculations in AiiDA.
Keywords: aiida,workflows,core-level,spectroscopy
Author-email: Xing Wang <xingwang1991@gmail.com>
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Classifier: Development Status :: 4 - Beta
Classifier: Framework :: AiiDA
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: POSIX :: Linux
Classifier: Operating System :: MacOS :: MacOS X
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Scientific/Engineering
License-File: LICENSE
Requires-Dist: aiida-core>=2.3
Requires-Dist: aiida-quantumespresso>=4.8
Requires-Dist: aiida-wannier90-workflows==2.3.0
Requires-Dist: aiida-pythonjob>=0.2.3
Requires-Dist: weas-widget>=0.1.25
Requires-Dist: mypy==1.6.1 ; extra == "dev"
Requires-Dist: pre-commit ; extra == "dev"
Requires-Dist: pytest~=6.2 ; extra == "dev"
Requires-Dist: pytest-regressions ; extra == "dev"
Requires-Dist: myst-parser ; extra == "docs"
Requires-Dist: pydata-sphinx-theme~=0.14.3 ; extra == "docs"
Requires-Dist: sphinx~=7.2 ; extra == "docs"
Requires-Dist: sphinx-copybutton~=0.5.0 ; extra == "docs"
Requires-Dist: sphinx-click~=4.0 ; extra == "docs"
Requires-Dist: sphinx-design~=0.5.0 ; extra == "docs"
Requires-Dist: sphinx-favicon ; extra == "docs"
Project-URL: documentation, https://aiidalab-qe-wannier90.readthedocs.io/
Project-URL: homepage, https://github.com/superstar54/aiidalab-qe-wannier90
Project-URL: source, https://github.com/superstar54/aiidalab-qe-wannier90
Project-URL: tracker, https://github.com/superstar54/aiidalab-qe-wannier90/issues
Provides-Extra: dev
Provides-Extra: docs

# aiidalab-qe-wannier90

A plugin for running Wannier calculations inside the AiiDAlab Quantum ESPRESSO App.

## Features

- **Band structure comparison** with DFT bands.
- With predefined protocols (`fast`, `balanced`, `stringent`)
- **Optional real-space Wannier functions** (3D visualization) with the atomic structure.

<img src="docs/source/_static/images/overview.png"  width="800px"/>


<!-- <img src="docs/source/_static/images/qeapp-wannier90-wf.gif"  width="100%"/> -->


## Usage
Run Wannier calculations via the AiiDAlab QE App GUI.


## Compile Wanntier90

This plugin requires the Wannier90 code from the latest source code from the [Wannier90 GitHub repository](https://github.com/wannier-developers/wannier90).

To compile Wannier90, follow the instructions below:

```bash
git clone https://github.com/wannier-developers/wannier90.git
cd wannier90
sudo apt update
sudo apt install gfortran libblas-dev liblapack-dev
cp config/make.inc.gfort make.inc
make wannier
```


validate the installation by running the following command:

```bash
./wannier90.x -h
```



## Isosurface

I used PythonJob to calculate the isosurface of the wannier function, and save the mesh data as AiiDA output node, then visualize the isosurface using the `weas-widget`. This avoids the need to download and save the large density file.


### Set up PythonJob code
To setup the `python` code for isosurface calculation, you need to install the following packages in the Python environment:

```
cloudpickle
scikit-image
ase
```

Then one can use `verdi` command create the `pythonjob` code. Here is an example configuration file to setup the `pythonjob` code:

```yaml
---
label: python3
description: python3.9.10 at Merlin 7
default_calc_job_plugin: pythonjob.pythonjob
filepath_executable: /opt/psi/Programming/Python/3.9.10/bin/python
prepend_text: |
    module purge
    module load Python/3.9.10
append_text: ''
```
Run the fowlling command to create the `pythonjob` code in your AiiDA profile:

```
verdi code create core.code.installed --config pythonjob-code.yaml
```

