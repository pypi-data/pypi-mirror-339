(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3938],{74833:function(e,t,n){var i=n(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(s,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var i=n(11611),s=n(82846),a=n(91936),r=Math.max,l=Math.min;e.exports=function(e,t,n){var o,c,d,u,m,f,p=0,h=!1,x=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=o,i=c;return o=c=void 0,p=t,u=e.apply(i,n)}function g(e){var n=e-f,i=e-p;return void 0===f||n>=t||n<0||x&&i>=d}function j(){var e,n,i,a=s();if(g(a))return b(a);m=setTimeout(j,(e=a-f,n=a-p,i=t-e,x?l(i,d-n):i))}function b(e){return(m=void 0,v&&o)?y(e):(o=c=void 0,u)}function w(){var e,n=s(),i=g(n);if(o=arguments,c=this,f=n,i){if(void 0===m)return p=e=f,m=setTimeout(j,t),h?y(e):u;if(x)return clearTimeout(m),m=setTimeout(j,t),y(f)}return void 0===m&&(m=setTimeout(j,t)),u}return t=a(t)||0,i(n)&&(h=!!n.leading,d=(x="maxWait"in n)?r(a(n.maxWait)||0,t):d,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==m&&clearTimeout(m),p=0,o=f=c=m=void 0},w.flush=function(){return void 0===m?u:b(s())},w}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},91936:function(e,t,n){var i=n(74833),s=n(11611),a=n(55193),r=0/0,l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return r;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=o.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):l.test(e)?r:+e}},7617:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var i=n(24246),s=n(77181);let a=e=>{let{label:t,isDisabled:n,...a}=e;return(0,i.jsx)(s.OK9,{"data-testid":"tab-".concat(t),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:a.fontSize,fontWeight:"500",color:"gray.500",isDisabled:n||!1,children:t})};t.Z=e=>{let{data:t,border:n="partial",...r}=e;return(0,i.jsxs)(s.mQc,{colorScheme:"complimentary",...r,children:[(0,i.jsx)(s.tdY,{width:"partial"===n?"max-content":void 0,children:t.map(e=>(0,i.jsx)(a,{label:e.label,isDisabled:e.isDisabled,fontSize:r.fontSize},e.label))}),(0,i.jsx)(s.nPR,{children:t.map(e=>(0,i.jsx)(s.x45,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},e.label))})]})}},29850:function(e,t,n){"use strict";n.d(t,{R:function(){return d}});var i=n(24246),s=n(77181),a=n(27378),r=n(65450);let l=e=>{let{children:t,className:n,style:a,...r}=e;return(0,i.jsx)(s.wpx,{...r,type:"text",className:"w-full justify-start ".concat(n),style:{fontWeight:600,padding:"var(--ant-select-option-padding)",backgroundColor:"var(--ant-select-option-selected-bg)",...a},children:t})};var o=n(16394);let c=(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l,{onClick:t,"data-testid":"add-new-system",id:"add-new-system",children:"Add new system +"}),e]}),d=e=>{var t;let{onAddSystem:n,...l}=e,[d,u]=(0,a.useState)(),{data:m,isFetching:f}=(0,r.xF)({page:1,size:25,search:d||void 0}),p=null==m?void 0:null===(t=m.items)||void 0===t?void 0:t.map(e=>({value:e.fides_key,label:e.name})),h=(0,a.useCallback)(e=>{(null==e?void 0:e.length)>1&&u(e),(null==e?void 0:e.length)===0&&u(void 0)},[u]),x=(0,a.useMemo)(()=>(0,o.Ds)(h,300),[h]);return(0,i.jsx)(s.WPr,{placeholder:"Search...","aria-label":"Search for a system to select",dropdownStyle:{minWidth:"500px"},dropdownRender:n?e=>c(e,n):void 0,"data-testid":"system-select",...l,filterOption:!1,options:p,onSearch:x,loading:l.loading||f})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(24246),s=n(77181),a=n(72707),r=n.n(a);let l=e=>{let{data:t}=e;return(0,i.jsxs)(s.jqI,{gap:12,title:"".concat(t.primaryName||"").concat(t.primaryName?": ":"").concat(t.name," - ").concat(t.description),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:t.primaryName||t.name}),t.primaryName&&": ".concat(t.name)]}),(0,i.jsx)("em",{children:t.description})]})},o=e=>{let{options:t,...n}=e,a=null==t?void 0:t.map(e=>({...e,className:r().option}));return(0,i.jsx)(s.WPr,{options:a,autoFocus:!0,variant:"borderless",optionRender:l,dropdownStyle:{minWidth:"500px"},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},57454:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var i=n(24246),s=n(66726),a=n.n(s),r=n(27378),l=n(86780);let o=e=>{let{value:t,onChange:n}=e,[s,o]=(0,r.useState)(t),c=a()(n,500),d=(0,r.useCallback)(e=>{o(e),c(e)},[]);return(0,i.jsx)(l.Z,{search:s,onChange:d,onClear:()=>{o(""),n("")}})}},70682:function(e,t,n){"use strict";var i=n(24246),s=n(79283),a=n(34929),r=n(78238);t.Z=e=>{let{selectedTaxonomies:t,...n}=e,{getDataUseDisplayNameProps:l,getDataUses:o}=(0,a.Z)(),c=o().filter(e=>e.active&&r.g.includes(e.fides_key)).map(e=>{let{name:t,primaryName:n}=l(e.fides_key);return{value:e.fides_key,name:t,primaryName:n,description:e.description||""}});return(0,i.jsx)(s.l,{options:c,...n})}},26183:function(e,t,n){"use strict";var i=n(24246);n(27378),t.Z=e=>{let{children:t,className:n,...s}=e;return(0,i.jsx)("div",{className:"relative flex w-full flex-wrap items-center gap-2 overflow-x-auto py-2 ".concat(n||""),...s,children:t})}},77685:function(e,t,n){"use strict";n.d(t,{i:function(){return _}});var i=n(24246),s=n(77181),a=n(34090),r=n(27378),l=n(55484),o=n(16134),c=n(25980),d=n(97181),u=n(40324),m=n(812),f=n(14047),p=n(45938),h=n(8133),x=n(33335),v=n(32885),y=n(57865),g=n(93237),j=n(65450),b=n(36345);let{Text:w}=s.AntTypography,S={name:"",vendor_id:void 0,description:"",tags:[]},_=e=>{let{onSuccessfulSubmit:t,toastOnSuccess:n,..._}=e,[C,k]=(0,r.useState)(!1),N=(0,o.T)(),{tcf:I,dictionaryService:z}=(0,c.hz)(),{isLoading:T}=(0,v.Rd)(void 0,{skip:!z}),W=(0,o.C)(v.o),R=(0,o.C)(y.gU),[q]=(0,j.in)(),[D]=(0,v.Qk)(),[Z]=(0,j.f7)(),{successAlert:F,errorAlert:E}=(0,f.V)(),{setSuggestions:B,setLockedForGVL:A}=y.dictSuggestionsSlice.actions,U=(0,r.useRef)(null),$=(0,r.useMemo)(()=>l.Ry().shape({name:l.Z_().required().label("System name").test("is-unique","",async(e,t)=>{let{data:n}=await q({page:1,size:10,search:e});return!((null==n?void 0:n.items)||[]).filter(t=>t.name===e).some(t=>t.name===e)||t.createError({message:'You already have a system called "'.concat(e,'". Please specify a unique name for this system.')})})}),[q]),M=e=>{if(z){if(!e){N(B("hiding")),N(A(!1));return}N(B("showing")),I&&(0,m.cj)(e)===m.c6.GVL?N(A(!0)):N(A(!1))}},Y=()=>{_.onClose(),N(B("initial")),N(A(!1))},O=async e=>{if(k(!0),e.vendor_id){let i=await D([e.vendor_id]);if((0,m.D4)(i))E((0,m.e$)(i.error));else{let{data:e}=i,s=e.systems[0];null==t||t(s.fides_key,s.name),n&&F("".concat(e.name," has been added to your system inventory."))}}else{let i={...e,fides_key:(0,x.E)(e.name),system_type:"",body:"",privacy_declarations:[]},s=await Z(i);if((0,m.D4)(s))E((0,m.e$)(s.error));else{let{fides_key:i,name:a}=s.data;null==t||t(i,a),n&&F("".concat(e.name," has been added to your system inventory."))}Y()}k(!1)};return(0,i.jsx)(h.Z,{title:"Add New System",..._,onClose:Y,children:(0,i.jsx)(a.J9,{initialValues:S,onSubmit:O,validationSchema:$,innerRef:U,children:e=>{let{dirty:t,isValid:n}=e;return(0,i.jsxs)(a.l0,{children:[(0,i.jsx)(p.Gt,{id:"new-system-modal",name:"Add New System"}),(0,i.jsxs)(s.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,i.jsx)(w,{children:"Fides will add this system to your inventory and configure it for consent using the categories of consent listed below. Optionally, you can check if this system is listed within the Fides compass library by selecting the compass icon below."}),z?(0,i.jsx)(b.Z,{label:"System name",options:W,onVendorSelected:M,isCreate:!0,lockedForGVL:R,isLoading:T}):(0,i.jsx)(u.j0,{id:"name",name:"name",label:"System name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. “Email Data Warehouse”",variant:"stacked",isRequired:!0}),(0,i.jsx)(g.Sv,{id:"description",name:"description",label:"Description",tooltip:"What services does this system perform?",disabled:R}),(0,i.jsx)(d.d,{mode:"tags",id:"tags",name:"tags",label:"System Tags",options:[],layout:"stacked",tooltip:"Are there any tags to associate with this system?",disabled:R})]}),(0,i.jsxs)(s.jqI,{justify:"space-between",children:[(0,i.jsx)(s.wpx,{htmlType:"reset",onClick:Y,disabled:T||!t||!n,"data-testid":"cancel-btn",children:"Cancel"}),(0,i.jsx)(s.wpx,{htmlType:"submit",type:"primary",disabled:T||!t||!n,loading:C,"data-testid":"save-btn",children:"Save"})]})]})}})})}},93237:function(e,t,n){"use strict";n.d(t,{Sv:function(){return p},Yb:function(){return f},dQ:function(){return h},lm:function(){return x}});var i=n(24246),s=n(77181),a=n(34090),r=n(27378),l=n(16134),o=n(40324),c=n(91613),d=n(32885),u=n(57865);let m=(e,t,n)=>{var i,s;let[o,c,{setValue:m,setTouched:f}]=(0,a.U$)({name:e,type:n||void 0}),p=!!(c.touched&&c.error),{error:h}=c,x={...o,value:null!==(i=o.value)&&void 0!==i?i:""},[v,y]=(0,r.useState)(null!==(s=x.value)&&void 0!==s?s:""),{values:g}=(0,a.u6)(),{vendor_id:j}=g,b=(0,l.C)((0,d.$e)(j||"")),w=(0,l.C)(u.bN),S=(0,r.useRef)();return(0,r.useEffect)(()=>{"showing"===w&&y(x.value)},[w,y]),(0,r.useEffect)(()=>{if("showing"===w&&b){let n=t?t(b):b[e];x.value!==n&&(m(n),setTimeout(()=>{var e;f(!0),null===(e=S.current)||void 0===e||e.blur()},300))}},[w,m,b,S.current]),(0,r.useEffect)(()=>{"hiding"===w&&m(v)},[w,m,v]),{field:x,isInvalid:p,isShowingSuggestions:w,error:h,inputRef:S}},f=e=>{let{label:t,tooltip:n,disabled:a,isRequired:r=!1,dictField:l,name:d,placeholder:u,id:f}=e,{field:p,isInvalid:h,isShowingSuggestions:x,error:v,inputRef:y}=m(d,l);return(0,i.jsx)(s.NIc,{isInvalid:h,isRequired:r,children:(0,i.jsxs)(s.gCW,{alignItems:"start",children:[(0,i.jsxs)(s.kCb,{alignItems:"center",children:[(0,i.jsx)(o.__,{htmlFor:f||d,fontSize:"xs",my:0,mr:1,children:t}),n?(0,i.jsx)(c.Z,{label:n}):null]}),(0,i.jsx)(o.oi,{...p,ref:y,isRequired:r,isDisabled:a,"data-testid":"input-".concat(p.name),placeholder:u,isPassword:!1,color:"showing"===x?"complimentary.500":"gray.800"}),(0,i.jsx)(o.Bc,{isInvalid:h,message:v,fieldName:p.name})]})})},p=e=>{let{label:t,tooltip:n,disabled:a,isRequired:r=!1,dictField:l,name:d,id:u}=e,{field:f,isInvalid:p,isShowingSuggestions:h,error:x}=m(d,l);return(0,i.jsx)(s.NIc,{isInvalid:p,isRequired:r,children:(0,i.jsxs)(s.gCW,{alignItems:"start",children:[(0,i.jsxs)(s.kCb,{alignItems:"center",children:[(0,i.jsx)(o.__,{htmlFor:u||d,fontSize:"xs",my:0,mr:1,children:t}),n?(0,i.jsx)(c.Z,{label:n}):null]}),(0,i.jsx)(s.gxH,{...f,size:"sm","data-testid":"input-".concat(f.name),focusBorderColor:"primary.600",color:"showing"===h?"complimentary.500":"gray.800",isDisabled:a}),(0,i.jsx)(o.Bc,{isInvalid:p,message:x,fieldName:f.name})]})})},h=e=>{let{label:t,tooltip:n,dictField:r,name:l,id:d,disabled:u}=e,{field:f,isInvalid:p,error:h}=m(l,r,"checkbox");return(0,i.jsxs)(s.NIc,{isInvalid:p,width:"full",children:[(0,i.jsxs)(s.xuv,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(s.Ugi,{spacing:1,children:[(0,i.jsx)(o.__,{htmlFor:d||l,fontSize:"xs",my:0,mr:0,children:t}),n?(0,i.jsx)(c.Z,{label:n}):null]}),(0,i.jsx)(s.Ugi,{children:(0,i.jsx)(a.gN,{name:f.name,children:e=>{let{form:{setFieldValue:t}}=e;return(0,i.jsx)(s.rAg,{checked:f.checked,onChange:e=>{t(f.name,e)},disabled:u,className:"mr-2","data-testid":"input-".concat(f.name),size:"small"})}})})]}),(0,i.jsx)(o.Bc,{isInvalid:p,message:h,fieldName:f.name})]})},x=e=>{let{label:t,tooltip:n,dictField:r,name:l,id:d,disabled:u}=e,{field:f,isInvalid:p,error:h,isShowingSuggestions:x}=m(l,r,"numeric"),{setFieldValue:v}=(0,a.u6)();return(0,i.jsxs)(s.NIc,{isInvalid:p,width:"full",children:[(0,i.jsxs)(s.xuv,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(s.Ugi,{spacing:1,children:[(0,i.jsx)(o.__,{htmlFor:d||l,fontSize:"xs",my:0,mr:0,children:t}),n?(0,i.jsx)(c.Z,{label:n}):null]}),(0,i.jsx)(s.Ugi,{children:(0,i.jsxs)(s.Y2U,{value:f.value,name:f.name,size:"xs",onBlur:f.onBlur,onChange:e=>{v(f.name,e)},w:"100%",colorScheme:"terracotta",inputMode:"numeric","data-testid":"input-".concat(f.name),color:"showing"===x?"complimentary.500":"gray.800",focusBorderColor:"primary.600",isDisabled:u,children:[(0,i.jsx)(s.zuI,{}),(0,i.jsxs)(s.FiK,{children:[(0,i.jsx)(s.WQu,{}),(0,i.jsx)(s.Y_d,{})]})]})})]}),(0,i.jsx)(o.Bc,{isInvalid:p,message:h,fieldName:f.name})]})}},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}}]);