(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7477],{45550:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/activity",function(){return a(3680)}])},91761:function(e,s,a){"use strict";var t=a(24246),i=a(77181),n=a(14047),r=a(98559),o=a(21702),l=a(79494),c=a(70675);s.Z=e=>{let{resource:s}=e,[a,{isLoading:d}]=(0,c.v8)(),[u,{isLoading:g}]=(0,c.cM)(),[x,{isLoading:I}]=(0,c.vi)(),j=g||I||d,{diff_status:h,child_diff_statuses:C,top_level_field_name:A}=s,{successAlert:f}=(0,n.V)(),L=h===o.LL.CLASSIFICATION_ADDITION||h===o.LL.CLASSIFICATION_UPDATE,_=C&&(C[o.LL.CLASSIFICATION_ADDITION]||C[o.LL.CLASSIFICATION_UPDATE]),m=(L||_)&&!A,T=L||_,S=m&&T,v=async()=>{await u({staged_resource_urn:s.urn}),f('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},N=async()=>{await x({staged_resource_urn:s.urn}),f("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},p=async()=>{await a({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,classify_monitored_resources:!0}),f("Reclassification of ".concat((0,r.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,t.jsxs)(i.Ugi,{gap:2,children:[m&&(0,t.jsx)(l.Z,{title:"Confirm",icon:(0,t.jsx)(i.nQG,{}),onClick:v,disabled:j,loading:g}),T&&(0,t.jsx)(l.Z,{title:"Ignore",icon:(0,t.jsx)(i.tpL,{}),onClick:N,disabled:j,loading:I}),!S&&(0,t.jsx)(l.Z,{title:"Reclassify",icon:(0,t.jsx)(i.nyI,{}),onClick:p,disabled:j,loading:d}),(0,t.jsx)(i.LZC,{}),S&&(0,t.jsxs)(i.v2r,{children:[(0,t.jsx)(i.j2t,{as:i.wpx,size:"small",type:"text",icon:(0,t.jsx)(i.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,t.jsx)(i.qyq,{children:(0,t.jsx)(i.sNh,{onClick:p,icon:(0,t.jsx)(i.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})}},3680:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return O}});var t,i,n=a(24246),r=a(27378),o=a(35287),l=a(58754),c=a(47182),d=a(92222),u=a(59003),g=a(77181),x=a(14481),I=a(72625),j=a(70675),h=a(38347),C=a(87667),A=a(50169),f=a(80285),L=a(57454);(t=i||(i={})).DATASET="Dataset",t.CLASSIFICATION="Classification";var _=a(74241),m=a(28278),T=a(20449),S=e=>(0,T.Z)(e)===m.E.CLASSIFICATION?i.CLASSIFICATION:i.DATASET,v=a(54409),N=a(91761);let p={items:[],total:0,page:1,size:50,pages:1},y=()=>(0,n.jsx)(g.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,n.jsxs)(g.gCW,{children:[(0,n.jsx)(g.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,n.jsx)(g.xvT,{fontSize:"sm",children:"You're up to date!"})]})}),D=(0,d.Cl)();var w=e=>{let{onRowClick:s,statusFilters:a,childsStatusFilters:t}=e,[o,l]=(0,r.useState)(""),{PAGE_SIZES:c,pageSize:m,setPageSize:T,onPreviousPageClick:w,isPreviousPageDisabled:R,onNextPageClick:O,isNextPageDisabled:b,startRange:E,endRange:Z,pageIndex:F,setTotalPages:P}=(0,x.oi)(),{isFetching:k,isLoading:M,data:V}=(0,j.z8)({diff_status:a,child_diff_status:t,page:F,size:m,search:o}),{items:z,total:U,pages:G}=(0,r.useMemo)(()=>null!=V?V:p,[V]);(0,r.useEffect)(()=>{P(G)},[G,P]);let W=(0,r.useMemo)(()=>[D.accessor(e=>e.name,{id:"name",cell:e=>(0,n.jsx)(C.Z,{result:e.row.original}),header:e=>(0,n.jsx)(x.Rr,{value:"Name",...e})}),D.accessor(e=>e.urn,{id:"project",cell:e=>(0,n.jsx)(x.G3,{value:(0,_.Z)(e.getValue())}),header:e=>(0,n.jsx)(x.Rr,{value:"Project",...e})}),D.display({id:"status",cell:e=>(0,n.jsx)(A.Z,{result:e.row.original}),header:e=>(0,n.jsx)(x.Rr,{value:"Status",...e})}),D.accessor(e=>e.system,{id:"system",cell:e=>(0,n.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,n.jsx)(x.Rr,{value:"System",...e})}),D.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,n.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,n.jsx)(x.Rr,{value:"Detected by",...e})}),D.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,n.jsx)(I.Cy,{time:e.getValue()}),header:e=>(0,n.jsx)(x.Rr,{value:"When",...e})}),D.accessor(e=>e,{id:"action",cell:e=>S(e.getValue())===i.DATASET?(0,n.jsx)(v.Z,{resource:e.getValue()}):(0,n.jsx)(N.Z,{resource:e.getValue()}),header:e=>(0,n.jsx)(x.Rr,{value:"Action",...e})})],[]),q=(0,u.b7)({getCoreRowModel:(0,d.sC)(),getGroupedRowModel:(0,d.qe)(),getExpandedRowModel:(0,d.rV)(),getRowId:f.Z,columns:W,manualPagination:!0,data:z,columnResizeMode:"onChange"});return M?(0,n.jsx)(x.I4,{rowHeight:36,numRows:36}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Q$,{children:(0,n.jsxs)(g.kCb,{gap:6,align:"center",children:[(0,n.jsx)(g.xuv,{flexShrink:0,children:(0,n.jsx)(L.M,{value:o,onChange:l})}),(0,n.jsx)(h.Z,{})]})}),(0,n.jsx)(x.ZK,{tableInstance:q,onRowClick:s,emptyTableNotice:(0,n.jsx)(y,{})}),(0,n.jsx)(x.s8,{totalRows:U||0,pageSizes:c,setPageSize:T,onPreviousPageClick:w,isPreviousPageDisabled:R||k,onNextPageClick:O,isNextPageDisabled:b||k,startRange:E,endRange:Z})]})},R=a(21702),O=()=>{let{navigateToDetectionResults:e,navigateToDiscoveryResults:s}=(0,c.Z)();return(0,n.jsxs)(o.Z,{title:"Data discovery",children:[(0,n.jsx)(l.Z,{heading:"All activity"}),(0,n.jsx)(w,{onRowClick:a=>{if(S(a)===i.DATASET){e({resourceUrn:a.urn});return}s({resourceUrn:a.urn})},statusFilters:[R.LL.ADDITION,R.LL.REMOVAL,R.LL.CLASSIFICATION_ADDITION,R.LL.CLASSIFICATION_UPDATE],childsStatusFilters:[R.LL.ADDITION,R.LL.REMOVAL,R.LL.CLASSIFICATION_ADDITION,R.LL.CLASSIFICATION_UPDATE]})]})}}},function(e){e.O(0,[8033,6060,4481,9999,6315,2888,9774,179],function(){return e(e.s=45550)}),_N_E=e.O()}]);