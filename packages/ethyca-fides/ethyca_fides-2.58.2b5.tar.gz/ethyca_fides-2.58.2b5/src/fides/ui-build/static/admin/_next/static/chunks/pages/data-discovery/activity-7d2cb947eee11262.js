(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7477],{45550:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/activity",function(){return a(3680)}])},91761:function(e,s,a){"use strict";var t=a(24246),i=a(77181),r=a(812),n=a(14047),o=a(7940),l=a(98559),c=a(28120),d=a(79494),u=a(70675);s.Z=e=>{let{resource:s}=e,[a,{isLoading:g}]=(0,u.v8)(),[x,{isLoading:I}]=(0,u.cM)(),[j,{isLoading:h}]=(0,u.vi)(),C=I||h||g,{diff_status:f,child_diff_statuses:A,top_level_field_name:L}=s,{successAlert:_,errorAlert:m}=(0,n.V)(),T=f===c.LL.CLASSIFICATION_ADDITION||f===c.LL.CLASSIFICATION_UPDATE,S=A&&(A[c.LL.CLASSIFICATION_ADDITION]||A[c.LL.CLASSIFICATION_UPDATE]),v=(T||S)&&!L,D=T||S,N=(0,o.G)(s)!==c.D$.FIELD,p=v&&D&&N,y=async()=>{let e=await x({staged_resource_urn:s.urn});(0,r.D4)(e)?m((0,r.e$)(e.error),"Failed to promote resource"):_('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},w=async()=>{let e=await j({staged_resource_urn:s.urn});(0,r.D4)(e)?m((0,r.e$)(e.error),"Failed to mute resource"):_("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},R=async()=>{let e=await a({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,classify_monitored_resources:!0});(0,r.D4)(e)?m((0,r.e$)(e.error),"Failed to reclassify resource"):_("Reclassification of ".concat((0,l.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,t.jsxs)(i.Ugi,{gap:2,children:[v&&(0,t.jsx)(d.Z,{title:"Confirm",icon:(0,t.jsx)(i.nQG,{}),onClick:y,disabled:C,loading:I}),D&&(0,t.jsx)(d.Z,{title:"Ignore",icon:(0,t.jsx)(i.tpL,{}),onClick:w,disabled:C,loading:h}),N&&!p&&(0,t.jsx)(d.Z,{title:"Reclassify",icon:(0,t.jsx)(i.nyI,{}),onClick:R,disabled:C,loading:g}),p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.LZC,{}),(0,t.jsxs)(i.v2r,{children:[(0,t.jsx)(i.j2t,{as:i.wpx,size:"small",type:"text",icon:(0,t.jsx)(i.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,t.jsx)(i.qyq,{children:(0,t.jsx)(i.sNh,{onClick:R,icon:(0,t.jsx)(i.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})]})}},3680:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return F}});var t,i,r=a(24246),n=a(27378),o=a(35287),l=a(58754),c=a(47182),d=a(92222),u=a(59003),g=a(77181),x=a(14481),I=a(72625),j=a(70675),h=a(38347),C=a(87667),f=a(50169),A=a(80285),L=a(57454);(t=i||(i={})).DATASET="Dataset",t.CLASSIFICATION="Classification";var _=a(74241),m=a(28278),T=a(20449),S=e=>(0,T.Z)(e)===m.E.CLASSIFICATION?i.CLASSIFICATION:i.DATASET,v=a(54409),D=a(91761);let N={items:[],total:0,page:1,size:50,pages:1},p=()=>(0,r.jsx)(g.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,r.jsxs)(g.gCW,{children:[(0,r.jsx)(g.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,r.jsx)(g.xvT,{fontSize:"sm",children:"You're up to date!"})]})}),y=(0,d.Cl)();var w=e=>{let{onRowClick:s,statusFilters:a,childsStatusFilters:t}=e,[o,l]=(0,n.useState)(""),{PAGE_SIZES:c,pageSize:m,setPageSize:T,onPreviousPageClick:w,isPreviousPageDisabled:R,onNextPageClick:F,isNextPageDisabled:O,startRange:b,endRange:E,pageIndex:Z,setTotalPages:P}=(0,x.oi)(),{isFetching:k,isLoading:M,data:V}=(0,j.z8)({diff_status:a,child_diff_status:t,page:Z,size:m,search:o}),{items:z,total:U,pages:G}=(0,n.useMemo)(()=>null!=V?V:N,[V]);(0,n.useEffect)(()=>{P(G)},[G,P]);let W=(0,n.useMemo)(()=>[y.accessor(e=>e.name,{id:"name",cell:e=>(0,r.jsx)(C.Z,{result:e.row.original}),header:e=>(0,r.jsx)(x.Rr,{value:"Name",...e})}),y.accessor(e=>e.urn,{id:"project",cell:e=>(0,r.jsx)(x.G3,{value:(0,_.Z)(e.getValue())}),header:e=>(0,r.jsx)(x.Rr,{value:"Project",...e})}),y.display({id:"status",cell:e=>(0,r.jsx)(f.Z,{result:e.row.original}),header:e=>(0,r.jsx)(x.Rr,{value:"Status",...e})}),y.accessor(e=>e.system,{id:"system",cell:e=>(0,r.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(x.Rr,{value:"System",...e})}),y.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,r.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(x.Rr,{value:"Detected by",...e})}),y.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,r.jsx)(I.Cy,{time:e.getValue()}),header:e=>(0,r.jsx)(x.Rr,{value:"When",...e})}),y.accessor(e=>e,{id:"action",cell:e=>S(e.getValue())===i.DATASET?(0,r.jsx)(v.Z,{resource:e.getValue()}):(0,r.jsx)(D.Z,{resource:e.getValue()}),header:e=>(0,r.jsx)(x.Rr,{value:"Action",...e})})],[]),$=(0,u.b7)({getCoreRowModel:(0,d.sC)(),getGroupedRowModel:(0,d.qe)(),getExpandedRowModel:(0,d.rV)(),getRowId:A.Z,columns:W,manualPagination:!0,data:z,columnResizeMode:"onChange"});return M?(0,r.jsx)(x.I4,{rowHeight:36,numRows:36}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Q$,{children:(0,r.jsxs)(g.kCb,{gap:6,align:"center",children:[(0,r.jsx)(g.xuv,{flexShrink:0,children:(0,r.jsx)(L.M,{value:o,onChange:l})}),(0,r.jsx)(h.Z,{})]})}),(0,r.jsx)(x.ZK,{tableInstance:$,onRowClick:s,emptyTableNotice:(0,r.jsx)(p,{})}),(0,r.jsx)(x.s8,{totalRows:U||0,pageSizes:c,setPageSize:T,onPreviousPageClick:w,isPreviousPageDisabled:R||k,onNextPageClick:F,isNextPageDisabled:O||k,startRange:b,endRange:E})]})},R=a(28120),F=()=>{let{navigateToDetectionResults:e,navigateToDiscoveryResults:s}=(0,c.Z)();return(0,r.jsxs)(o.Z,{title:"Data discovery",children:[(0,r.jsx)(l.Z,{heading:"All activity"}),(0,r.jsx)(w,{onRowClick:a=>{if(S(a)===i.DATASET){e({resourceUrn:a.urn});return}s({resourceUrn:a.urn})},statusFilters:[R.LL.ADDITION,R.LL.REMOVAL,R.LL.CLASSIFICATION_ADDITION,R.LL.CLASSIFICATION_UPDATE],childsStatusFilters:[R.LL.ADDITION,R.LL.REMOVAL,R.LL.CLASSIFICATION_ADDITION,R.LL.CLASSIFICATION_UPDATE]})]})}}},function(e){e.O(0,[8033,6060,4481,9999,6315,2888,9774,179],function(){return e(e.s=45550)}),_N_E=e.O()}]);