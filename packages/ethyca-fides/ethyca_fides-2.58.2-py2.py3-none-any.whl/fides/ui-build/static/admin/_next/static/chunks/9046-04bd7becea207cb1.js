"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9046],{7617:function(e,s,t){t.d(s,{q:function(){return l}});var i=t(24246),a=t(77181);let l=e=>{let{label:s,isDisabled:t,...l}=e;return(0,i.jsx)(a.OK9,{"data-testid":"tab-".concat(s),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:l.fontSize,fontWeight:"500",color:"gray.500",isDisabled:t||!1,children:s})};s.Z=e=>{let{data:s,border:t="partial",...r}=e;return(0,i.jsxs)(a.mQc,{colorScheme:"complimentary",...r,children:[(0,i.jsx)(a.tdY,{width:"partial"===t?"max-content":void 0,children:s.map(e=>(0,i.jsx)(l,{label:e.label,isDisabled:e.isDisabled,fontSize:r.fontSize},e.label))}),(0,i.jsx)(a.nPR,{children:s.map(e=>(0,i.jsx)(a.x45,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},e.label))})]})}},66379:function(e,s,t){var i=t(24246),a=t(77181),l=t(7617);s.Z=e=>{let{data:s,border:t="partial",borderWidth:r=2,...n}=e;return(0,i.jsx)(a.mQc,{colorScheme:"complimentary",...n,children:(0,i.jsx)(a.tdY,{width:"partial"===t?"max-content":void 0,borderBottomWidth:r,children:s.map(e=>(0,i.jsx)(l.q,{label:e.label,"data-testid":e.label,isDisabled:e.isDisabled,fontSize:n.fontSize},e.label))})})}},79494:function(e,s,t){var i=t(24246),a=t(77181);s.Z=e=>{let{title:s,icon:t,type:l,...r}=e;return(0,i.jsx)(a.wpx,{size:"small",type:l,"data-testid":"action-".concat(s),icon:t,iconPosition:"start",...r,children:s})}},45896:function(e,s,t){var i=t(24246),a=t(66379);s.Z=e=>{let{filterTabs:s,onChange:t,filterTabIndex:l}=e;return(0,i.jsx)(a.Z,{border:"full-width",mb:5,size:"sm",data:s,borderWidth:1,index:l,onChange:t})}},69828:function(e,s,t){t.d(s,{Y:function(){return r}});var i=t(24246),a=t(77181),l=t(70788);let r=[(0,i.jsx)(a.PJP.S9g,{},"layers"),(0,i.jsx)(a.PJP.ehp,{},"dataset"),(0,i.jsx)(a.PJP.iA_,{},"table"),(0,i.jsx)(a.PJP.$4y,{style:{transform:"rotate(-90deg)"}},"field")];s.Z=e=>{let{resourceUrn:s,parentLink:t,onPathClick:a=()=>{}}=e,n=[];if(s||n.push({title:"All activity"}),s){n.push({title:"All activity",href:t});let e=s.split(".");e.forEach((s,t)=>{0!==t&&n.push({title:s,icon:r[t-1],onClick:s=>{s.preventDefault(),a(e.slice(0,t+1).join("."))}})})}return(0,i.jsx)(l.m,{"data-testid":"results-breadcrumb",items:n})}},38347:function(e,s,t){var i=t(24246),a=t(77181),l=t(56839);s.Z=()=>(0,i.jsxs)(a.J2e,{isLazy:!0,trigger:"hover",children:[(0,i.jsx)(a.xol,{children:(0,i.jsx)(a.UOT,{color:"gray.400"})}),(0,i.jsxs)(a.yky,{bgColor:"gray.800",color:"white",fontSize:"sm",w:"auto",border:"none",children:[(0,i.jsx)(a.Ytg,{fontWeight:"semibold",border:"none",pb:0,children:"Activity legend:"}),(0,i.jsx)(a.QHN,{bgColor:"gray.800"}),(0,i.jsx)(a.baG,{border:"none",children:(0,i.jsxs)(a.MIq,{columns:2,spacing:2,children:[(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.Rv,{})," Change detected"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.$P,{})," Data labeled"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.zj,{})," Monitoring"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.dK,{})," Addition detected"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.Kr,{})," Unmonitored"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.q1,{})," Removal detected"]})]})})]})]})},47182:function(e,s,t){var i=t(86677),a=t(77830);s.Z=()=>{let e=(0,i.useRouter)();return{monitorId:e.query.monitorId,resourceUrn:e.query.resourceUrn,navigateToDetectionResults:s=>{let{resourceUrn:t,filterTabIndex:i}=s;e.push({pathname:a.dS,query:{resourceUrn:t,filterTabIndex:i}})},navigateToDiscoveryResults:s=>{let{resourceUrn:t,filterTabIndex:i}=s;e.push({pathname:a.Sj,query:{resourceUrn:t,filterTabIndex:i}})}}}},11904:function(e,s,t){t.d(s,{Z:function(){return F}});var i,a,l=t(24246),r=t(59003),n=t(92222),o=t(77181),d=t(86677),c=t(27378),u=t(14481),x=t(45896),g=t(70675),h=t(72625),j=t(79947),f=t(50169),I=t(28278),m=t(74241),v=t(21702),L=t(91761),C=t(61099),p=t(87667),S=e=>{let{resourceType:s}=e,t=(0,n.Cl)();return s===v.D$.SCHEMA?{columns:[t.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(p.Z,{result:e.row.original,changeTypeOverride:I.E.CLASSIFICATION}),header:e=>(0,l.jsx)(u.Rr,{value:"Name",...e}),size:300}),t.accessor(e=>e.urn,{id:"project",cell:e=>(0,l.jsx)(u.G3,{value:(0,m.Z)(e.getValue())}),header:e=>(0,l.jsx)(u.Rr,{value:"Project",...e})}),t.display({id:"status",cell:e=>(0,l.jsx)(f.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),t.accessor(e=>e.system,{id:"system",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"System",...e})}),t.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Detected by",...e})}),t.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),t.display({id:"action",cell:e=>e.row.original.diff_status!==v.LL.MUTED?(0,l.jsx)(L.Z,{resource:e.row.original}):(0,l.jsx)(u.G3,{value:"--"}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===v.D$.TABLE?{columns:[t.display({id:"select",cell:e=>{var s;let{row:t}=e;return(0,l.jsx)(h.k,{isChecked:t.getIsSelected(),onChange:t.getToggleSelectedHandler(),dataTestId:"select-".concat(null!==(s=t.original.name)&&void 0!==s?s:t.id)})},header:e=>{let{table:s}=e;return(0,l.jsx)(h.k,{isChecked:s.getIsAllPageRowsSelected(),isIndeterminate:s.getIsSomeRowsSelected(),onChange:s.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40}),t.accessor(e=>e.name,{id:"tables",cell:e=>(0,l.jsx)(p.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Table name",...e}),size:300}),t.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),t.display({id:"status",cell:e=>(0,l.jsx)(f.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),t.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Table"}),header:"Type"}),t.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:"Time"}),t.display({id:"actions",cell:e=>(0,l.jsx)(L.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===v.D$.FIELD?{columns:[t.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(p.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Field name",...e}),size:300}),t.accessor(e=>e.source_data_type,{id:"data-type",cell:e=>(0,l.jsx)(j.Z,{type:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Data type",...e})}),t.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),t.display({id:"status",cell:e=>(0,l.jsx)(f.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),t.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Field"}),header:"Type"}),t.display({id:"classifications",cell:e=>{let{row:s}=e;return(0,l.jsx)(C.Z,{resource:s.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),t.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),t.display({id:"actions",cell:e=>(0,l.jsx)(L.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:{columns:[]}};(i=a||(a={}))[i.ACTION_REQUIRED=0]="ACTION_REQUIRED",i[i.UNMONITORED=1]="UNMONITORED";var _=e=>{let{initialFilterTabIndex:s=0}=e,[t,i]=(0,c.useState)(s),a=(0,c.useMemo)(()=>[{label:"Action Required",filters:[v.LL.CLASSIFICATION_ADDITION,v.LL.CLASSIFICATION_UPDATE],childFilters:[v.LL.CLASSIFICATION_ADDITION,v.LL.CLASSIFICATION_UPDATE]},{label:"In progress",filters:[v.LL.CLASSIFYING,v.LL.CLASSIFICATION_QUEUED],childFilters:[v.LL.CLASSIFYING,v.LL.CLASSIFICATION_QUEUED]},{label:"Unmonitored",filters:[v.LL.MUTED],childFilters:[]}],[]);return{filterTabs:a,filterTabIndex:t,setFilterTabIndex:i,activeDiffFilters:a[t].filters,activeChildDiffFilters:a[t].childFilters}},b=t(47182),A=t(38347),y=t(79494),T=e=>{let{resourceUrn:s}=e,[t,{isLoading:i}]=(0,g.Hf)(),[a,{isLoading:r}]=(0,g.zV)(),n=i||r,d=async e=>{await a({staged_resource_urns:e})},c=async e=>{await t({staged_resource_urns:e})};return(0,l.jsx)(o.jqI,{"data-testid":"bulk-actions-menu",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(y.Z,{title:"Confirm all",icon:(0,l.jsx)(o.nQG,{}),onClick:()=>c([s]),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(y.Z,{title:"Ignore all",icon:(0,l.jsx)(o.tpL,{}),onClick:()=>d([s]),disabled:n,loading:r,size:"middle"})]})})},D=e=>{let{selectedUrns:s}=e,[t,{isLoading:i}]=(0,g.Hf)(),[a,{isLoading:r}]=(0,g.zV)(),n=i||r,d=async e=>{await t({staged_resource_urns:e})},c=async e=>{await a({staged_resource_urns:e})};return s.length?(0,l.jsxs)(o.jqI,{className:"items-center","data-testid":"bulk-actions-menu",children:[(0,l.jsx)(o.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:4,children:"".concat(s.length," selected")}),(0,l.jsxs)(o.jqI,{className:"gap-2",children:[(0,l.jsx)(y.Z,{title:"Confirm",icon:(0,l.jsx)(o.nQG,{}),onClick:()=>d(s),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(y.Z,{title:"Ignore",icon:(0,l.jsx)(o.tpL,{}),disabled:n,loading:r,onClick:()=>c(s),size:"middle"})]})]}):null},R=t(7940),E=t(80285),N=t(36168),w=t(57454);let O={items:[],total:0,page:1,size:50,pages:1},Z=()=>(0,l.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,l.jsxs)(o.gCW,{children:[(0,l.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,l.jsx)(o.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var F=e=>{var s,t;let{resourceUrn:i}=e,h=(0,d.useRouter)(),[j,f]=(0,c.useState)(""),{filterTabs:I,setFilterTabIndex:m,filterTabIndex:L,activeDiffFilters:C,activeChildDiffFilters:p}=_({initialFilterTabIndex:(null===(s=h.query)||void 0===s?void 0:s.filterTabIndex)?Number(null===(t=h.query)||void 0===t?void 0:t.filterTabIndex):void 0}),[y,F]=(0,c.useState)({}),{PAGE_SIZES:z,pageSize:k,setPageSize:P,onPreviousPageClick:U,isPreviousPageDisabled:M,onNextPageClick:G,isNextPageDisabled:q,startRange:V,endRange:Q,pageIndex:W,setTotalPages:H,resetPageIndexToDefault:Y}=(0,u.oi)();(0,c.useEffect)(()=>{Y()},[i,j,Y,C,p]);let{isFetching:$,isLoading:J,data:K}=(0,g.z8)({staged_resource_urn:i,page:W,size:k,child_diff_status:p,diff_status:C,search:j}),B=(0,R.G)(null==K?void 0:K.items[0]),{items:X,total:ee,pages:es}=(0,c.useMemo)(()=>null!=K?K:O,[K]);(0,c.useEffect)(()=>{H(es)},[es,H]);let{columns:et}=S({resourceType:B}),ei=(0,c.useMemo)(()=>et,[et]),{navigateToDiscoveryResults:ea}=(0,b.Z)(),el=(0,r.b7)({getCoreRowModel:(0,n.sC)(),getGroupedRowModel:(0,n.qe)(),getExpandedRowModel:(0,n.rV)(),columns:ei,manualPagination:!0,onRowSelectionChange:F,state:{rowSelection:y},getRowId:E.Z,data:X,columnResizeMode:"onChange"}),er=Object.keys(y).filter(e=>y[e]);return J?(0,l.jsx)(u.I4,{rowHeight:36,numRows:36}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.Z,{filterTabs:I,filterTabIndex:L,onChange:m}),(0,l.jsxs)(u.Q$,{children:[(0,l.jsxs)(o.kCb,{gap:6,align:"center",children:[(0,l.jsx)(o.xuv,{flexShrink:0,children:(0,l.jsx)(w.M,{value:j,onChange:f})}),(0,l.jsx)(A.Z,{})]}),B===v.D$.TABLE&&!!er.length&&(0,l.jsx)(D,{selectedUrns:er}),B===v.D$.FIELD&&L!==a.UNMONITORED&&(0,l.jsx)(T,{resourceUrn:i})]}),(0,l.jsx)(u.ZK,{tableInstance:el,onRowClick:e=>ea({resourceUrn:e.urn,filterTabIndex:L}),getRowIsClickable:e=>B!==v.D$.FIELD||(0,N.Z)(e),emptyTableNotice:(0,l.jsx)(Z,{})}),(0,l.jsx)(u.s8,{totalRows:ee||0,pageSizes:z,setPageSize:P,onPreviousPageClick:U,isPreviousPageDisabled:M||$,onNextPageClick:G,isNextPageDisabled:q||$,startRange:V,endRange:Q})]})}},91761:function(e,s,t){var i=t(24246),a=t(77181),l=t(14047),r=t(98559),n=t(21702),o=t(79494),d=t(70675);s.Z=e=>{let{resource:s}=e,[t,{isLoading:c}]=(0,d.v8)(),[u,{isLoading:x}]=(0,d.cM)(),[g,{isLoading:h}]=(0,d.vi)(),j=x||h||c,{diff_status:f,child_diff_statuses:I,top_level_field_name:m}=s,{successAlert:v}=(0,l.V)(),L=f===n.LL.CLASSIFICATION_ADDITION||f===n.LL.CLASSIFICATION_UPDATE,C=I&&(I[n.LL.CLASSIFICATION_ADDITION]||I[n.LL.CLASSIFICATION_UPDATE]),p=(L||C)&&!m,S=L||C,_=p&&S,b=async()=>{await u({staged_resource_urn:s.urn}),v('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},A=async()=>{await g({staged_resource_urn:s.urn}),v("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},y=async()=>{await t({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,classify_monitored_resources:!0}),v("Reclassification of ".concat((0,r.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the â€œData discoveryâ€œ tab."),"Reclassification started")};return(0,i.jsxs)(a.Ugi,{gap:2,children:[p&&(0,i.jsx)(o.Z,{title:"Confirm",icon:(0,i.jsx)(a.nQG,{}),onClick:b,disabled:j,loading:x}),S&&(0,i.jsx)(o.Z,{title:"Ignore",icon:(0,i.jsx)(a.tpL,{}),onClick:A,disabled:j,loading:h}),!_&&(0,i.jsx)(o.Z,{title:"Reclassify",icon:(0,i.jsx)(a.nyI,{}),onClick:y,disabled:j,loading:c}),(0,i.jsx)(a.LZC,{}),_&&(0,i.jsxs)(a.v2r,{children:[(0,i.jsx)(a.j2t,{as:a.wpx,size:"small",type:"text",icon:(0,i.jsx)(a.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,i.jsx)(a.qyq,{children:(0,i.jsx)(a.sNh,{onClick:y,icon:(0,i.jsx)(a.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})}},79947:function(e,s,t){var i=t(24246),a=t(77181);s.Z=e=>{let{type:s}=e;return(0,i.jsx)(a.kCb,{align:"center",h:"full",children:!!s&&(0,i.jsx)(a.j8w,{children:s})})}},87667:function(e,s,t){var i=t(24246),a=t(77181),l=t(56839),r=t(20449),n=t(98559),o=t(80356);s.Z=e=>{let{result:s,changeTypeOverride:t}=e,d=null!=t?t:(0,r.Z)(s);return(0,i.jsxs)(a.kCb,{alignItems:"center",height:"100%",children:[(0,i.jsx)(a.ua7,{label:d,children:(0,i.jsx)("span",{children:l.QL[d]})}),(0,i.jsx)(a.xvT,{fontSize:"xs",lineHeight:4,fontWeight:(0,o.Z)(s)?"semibold":"normal",overflow:"hidden",textOverflow:"ellipsis",children:(0,n.Z)(s)})]})}},50169:function(e,s,t){var i=t(24246),a=t(14481),l=t(28278),r=t(20449);let n={[l.E.MUTED]:{color:"marble",label:"Unmonitored"},[l.E.MONITORED]:{color:"success",label:"Monitoring"},[l.E.IN_PROGRESS]:{color:"info",label:"Classifying"}};s.Z=e=>{var s,t,l,o,d;let{result:c,changeTypeOverride:u}=e;if(null===(s=c.user_assigned_data_categories)||void 0===s?void 0:s.length)return(0,i.jsx)(a.A4,{color:"success",value:"Reviewed"});let x=null!=u?u:(0,r.Z)(c);return(0,i.jsx)(a.A4,{color:null!==(o=null===(t=n[x])||void 0===t?void 0:t.color)&&void 0!==o?o:"warning",value:null!==(d=null===(l=n[x])||void 0===l?void 0:l.label)&&void 0!==d?d:"Pending review"})}},74241:function(e,s){s.Z=e=>{let s=e.split(".");return s.length>1?s[1]:""}},20449:function(e,s,t){var i=t(28278),a=t(21702);s.Z=e=>e.diff_status===a.LL.ADDITION?i.E.ADDITION:e.diff_status===a.LL.REMOVAL?i.E.REMOVAL:e.diff_status===a.LL.CLASSIFYING||e.diff_status===a.LL.CLASSIFICATION_QUEUED?i.E.IN_PROGRESS:e.diff_status===a.LL.CLASSIFICATION_ADDITION||e.diff_status===a.LL.CLASSIFICATION_UPDATE?i.E.CLASSIFICATION:e.child_diff_statuses?e.child_diff_statuses[a.LL.CLASSIFYING]||e.child_diff_statuses[a.LL.CLASSIFICATION_QUEUED]?i.E.IN_PROGRESS:e.child_diff_statuses[a.LL.CLASSIFICATION_ADDITION]||e.child_diff_statuses[a.LL.CLASSIFICATION_UPDATE]?i.E.CLASSIFICATION:e.child_diff_statuses[a.LL.ADDITION]||e.child_diff_statuses[a.LL.REMOVAL]?i.E.CHANGE:e.diff_status===a.LL.MONITORED?i.E.MONITORED:e.diff_status===a.LL.MUTED?i.E.MUTED:i.E.NONE:i.E.NONE},80285:function(e,s){s.Z=e=>e.urn}}]);