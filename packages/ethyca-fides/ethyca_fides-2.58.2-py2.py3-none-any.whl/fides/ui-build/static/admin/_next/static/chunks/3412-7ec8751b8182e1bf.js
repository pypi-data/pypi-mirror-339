"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3412],{3412:function(e,n,i){i.d(n,{Z:function(){return U}});var a=i(24246),t=i(77181),o=i(34090),l=i(86677),r=i(27378),s=i(55484),d=i(16134),c=i(812);let p=(0,t.IUT)({displayName:"DesktopIcon",viewBox:"0 0 24 24",path:(0,a.jsx)("path",{fill:"currentColor",d:"M20.5556 4.05556H3.44444C3.10833 4.05556 2.83333 4.33056 2.83333 4.66667V12H21.1667V4.66667C21.1667 4.33056 20.8917 4.05556 20.5556 4.05556ZM23 12V13.8333V15.6667C23 17.0149 21.9038 18.1111 20.5556 18.1111H14.9142L15.2198 19.9445H17.1944C17.7024 19.9445 18.1111 20.3531 18.1111 20.8611C18.1111 21.3691 17.7024 21.7778 17.1944 21.7778H14.4444H9.55556H6.80556C6.29757 21.7778 5.88889 21.3691 5.88889 20.8611C5.88889 20.3531 6.29757 19.9445 6.80556 19.9445H8.78021L9.08576 18.1111H3.44444C2.09618 18.1111 1 17.0149 1 15.6667V13.8333V12V4.66667C1 3.31841 2.09618 2.22223 3.44444 2.22223H20.5556C21.9038 2.22223 23 3.31841 23 4.66667V12ZM2.83333 13.8333V15.6667C2.83333 16.0028 3.10833 16.2778 3.44444 16.2778H10.1476C10.159 16.2778 10.1705 16.2778 10.1781 16.2778H13.8142C13.8257 16.2778 13.8372 16.2778 13.8448 16.2778H20.5556C20.8917 16.2778 21.1667 16.0028 21.1667 15.6667V13.8333H2.83333ZM10.6365 19.9445H13.3597L13.0542 18.1111H10.942L10.6365 19.9445Z"})}),u=(0,t.IUT)({displayName:"MobileIcon",viewBox:"0 0 24 24",path:(0,a.jsx)("path",{fill:"currentColor",d:"M6.5 20.25C6.5 20.6281 6.80938 20.9375 7.1875 20.9375H16.8125C17.1906 20.9375 17.5 20.6281 17.5 20.25V16.8125H6.5V20.25ZM6.5 14.75H17.5V3.75C17.5 3.37188 17.1906 3.0625 16.8125 3.0625H7.1875C6.80938 3.0625 6.5 3.37188 6.5 3.75V14.75ZM4.4375 3.75C4.4375 2.2332 5.6707 1 7.1875 1H16.8125C18.3293 1 19.5625 2.2332 19.5625 3.75V20.25C19.5625 21.7668 18.3293 23 16.8125 23H7.1875C5.6707 23 4.4375 21.7668 4.4375 20.25V3.75ZM12 17.8438C12.2735 17.8438 12.5358 17.9524 12.7292 18.1458C12.9226 18.3392 13.0312 18.6015 13.0312 18.875C13.0312 19.1485 12.9226 19.4108 12.7292 19.6042C12.5358 19.7976 12.2735 19.9062 12 19.9062C11.7265 19.9062 11.4642 19.7976 11.2708 19.6042C11.0774 19.4108 10.9688 19.1485 10.9688 18.875C10.9688 18.6015 11.0774 18.3392 11.2708 18.1458C11.4642 17.9524 11.7265 17.8438 12 17.8438Z"})});var v=i(77830),b=i(46628),_=i(7426),m=i(60325);let f={language:{label:"Language",validation:s.Z_()},title:{label:"Title",validation:s.Z_()},description:{label:"Description",validation:s.Z_()},accept_button_label:{label:"Accept button label",validation:s.Z_()},reject_button_label:{label:"Reject button label",validation:s.Z_()},save_button_label:{label:"Save button label",validation:s.Z_()},acknowledge_button_label:{label:"Acknowledge button label",validation:s.Z_()},privacy_policy_url:{label:"Privacy policy URL",validation:s.Z_().url()},privacy_preferences_link_label:{label:"Privacy preferences link label",validation:s.Z_()},banner_title:{label:"Banner title",validation:s.Z_()},banner_description:{label:"Banner description",validation:s.Z_()},purpose_header:{label:"Purpose header",validation:s.Z_()},privacy_policy_link_label:{label:"Privacy policy link label",validation:s.Z_()},modal_link_label:{label:"Modal link label",validation:s.Z_()},is_default:{label:"Default language",validation:s.O7()}};var g=i(34334),y=i(13083),h=i.n(y),x=i(43218),w=i.n(x),C=i(52253),k=i(48515),j=i(21702);let V={language:j.eU.EN,accept_button_label:"Accept",acknowledge_button_label:"OK",banner_description:"",banner_title:"",purpose_header:"",description:"Description",privacy_policy_link_label:"",privacy_policy_url:"",modal_link_label:"",privacy_preferences_link_label:"Privacy preferences",reject_button_label:"Reject All",save_button_label:"Save",title:"Manage your consent preferences",is_default:!0},Z=e=>({...V,...e.translations?e.translations[0]:{}}),E=(e,n)=>{var i,a,t,o;return{options:{debug:!1,geolocationApiUrl:"",isGeolocationEnabled:!1,isOverlayEnabled:!0,isPrefetchEnabled:!1,overlayParentId:C.Vk,modalLinkId:null,privacyCenterUrl:"http://localhost:3000",fidesApiUrl:"http://localhost:8080/api/v1",preventDismissal:null!==(o=e.dismissable)&&void 0!==o&&o,allowHTMLDescription:!0,fidesString:null,fidesJsBaseUrl:"",base64Cookie:!1,fidesLocale:null===(a=e.translations)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.language,fidesClearCookie:!0},experience:{id:"pri_111",region:"us_ca",component:"banner_and_modal",available_locales:null===(t=e.translations)||void 0===t?void 0:t.map(e=>e.language),experience_config:{id:"pri_222",regions:["us_ca"],component:"banner_and_modal",disabled:!1,is_default:!0,dismissable:e.dismissable,show_layer1_notices:!1,layer1_button_options:k.O.OPT_IN_OPT_OUT,allow_language_selection:!0,auto_detect_language:!0,auto_subdomain_cookie_deletion:!0,language:"en",translations:[Z(e)]},privacy_notices:n},geolocation:{country:"US",location:"US-CA",region:"CA"}}},A=e=>{let{language:n,is_default:i,...a}=V,t=Object.keys(a).map(n=>{let i=e[n];return{[n]:void 0!==i?i:V[n]}}).reduce((e,n)=>({...e,...n}),{});return{language:e.language,is_default:e.is_default,...t}};var D=i(71922),H=i(32222);let N=e=>{let{title:n,description:i}=e;return(0,a.jsx)(t.kCb,{h:"full",justify:"center",align:"center",children:(0,a.jsxs)(t.kCb,{bgColor:"white",borderRadius:"md",p:6,boxShadow:"md",direction:"column",align:"center",gap:"2",maxW:"512px","data-testid":"no-preview-notice",children:[(0,a.jsx)(t.xvT,{fontSize:"lg",fontWeight:"500",align:"center",children:n}),(0,a.jsx)(t.xvT,{color:"gray.500",align:"center",children:i})]})})};var M=e=>{var n;let{allPrivacyNotices:i,initialValues:l,translation:s,isMobilePreview:d}=e,{values:p}=(0,o.u6)(),[u,v]=(0,r.useState)([]),b=[j.re.BANNER_AND_MODAL,j.re.MODAL].includes(p.component),_=(0,t.pmc)(),[m]=(0,D.Je)(),f=async e=>{let n=await m(e);n.isError&&_({status:"error",description:(0,c.e$)(n.error,"A problem occurred while fetching privacy notice data.  Some notices may not display correctly on the preview.")});let{data:i}=await m(e);return i};(0,r.useEffect)(()=>{p.privacy_notice_ids&&p.component!==j.re.TCF_OVERLAY?Promise.all(p.privacy_notice_ids.map(e=>f(e))).then(e=>v(e.filter(e=>void 0!==e))):v([])},[p.privacy_notice_ids]);let g=(0,r.useMemo)(()=>E(l,u),[l,u]);(0,r.useEffect)(()=>{var e,n,i,a;p.component===j.re.MODAL&&(g.experience.experience_config.component=j.re.MODAL);let t=null===(e=p.translations)||void 0===e?void 0:e.find(e=>e.language===(null==s?void 0:s.language));(null===(n=p.translations)||void 0===n?void 0:n.length)&&(t?(g.experience.available_locales=[...g.experience.available_locales||[],t.language],g.experience.experience_config.translations[0]=A(t),g.options.fidesLocale=t.language):p.translations&&(g.experience.experience_config.translations[0]=A(p.translations[0]),g.options.fidesLocale=p.translations[0].language)),g.experience.experience_config.show_layer1_notices=!!(null===(i=p.privacy_notice_ids)||void 0===i?void 0:i.length)&&!!p.show_layer1_notices,g.experience.experience_config.layer1_button_options=p.component===j.re.BANNER_AND_MODAL&&p.layer1_button_options||k.O.OPT_IN_OPT_OUT,g.options.preventDismissal=!p.dismissable,window.Fides&&(null===(a=p.privacy_notice_ids)||void 0===a?void 0:a.length)&&b&&window.Fides.init(g)},[p,s,g,i,b]);let y=document.getElementById("fides-modal");return(y&&y.removeAttribute("tabindex"),b)?(null===(n=p.privacy_notice_ids)||void 0===n?void 0:n.length)?(0,a.jsxs)(t.kCb,{h:"full",justify:"center",align:"center",overflow:"scroll",children:[(0,a.jsx)(h(),{id:"905800c62191633b",dynamic:[C.Vk],children:"div#fides-overlay{z-index:5000!important}div#".concat(C.Vk,"{padding-top:45px;margin:auto!important;pointer-events:none}div#fides-banner-container{position:static!important;-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important;-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;transition:none!important}div#fides-banner-container.fides-banner-hidden{display:none}.fides-modal-container{background-color:unset!important;position:static!important;display:none!important}.fides-modal-overlay{background-color:inherit!important;position:static!important;display:none!important}div.fides-modal-content{position:relative!important;-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important;left:initial!important;top:initial!important}div.fides-modal-footer{width:unset}")}),b?(0,a.jsx)("style",{children:"div#fides-modal {\n          display: flex !important;\n          justify-content: center;\n          background-color: unset;\n          ".concat(p.component===j.re.BANNER_AND_MODAL?"padding-top: 3rem; padding-bottom: 3rem;":"","\n        }")}):null,d?(0,a.jsx)("style",{children:"\n            div#".concat(C.Vk," {\n              width: 70% !important;\n            }\n            div.fides-modal-button-group {\n              flex-direction: column !important;\n            }\n            div#fides-modal {\n              width: 70% !important;\n              margin: auto;\n            }\n            div#fides-banner {\n              padding: 24px;\n              width: 100%;\n            }\n\n            div#fides-banner-description {\n              margin-bottom: 0px;\n            }\n\n            div#fides-banner-inner div#fides-button-group {\n              flex-direction: column;\n              align-items: flex-start;\n              gap: 12px;\n              padding-top: 24px;\n            }\n\n            .fides-banner-button-group {\n              flex-direction: column;\n              width: 100%;\n            }\n\n            button.fides-banner-button {\n              margin: 0px;\n              width: 100%;\n            }\n\n            div#fides-banner-inner-container {\n              display: flex;\n              flex-direction: column;\n              max-height: 50vh;\n              overflow-y: auto;\n              scrollbar-gutter: stable;\n            }\n\n            div#fides-privacy-policy-link {\n              order: 1;\n              width: 100%;\n            }\n            .fides-modal-footer {\n              max-width: 100%;\n            }\n            .fides-banner-secondary-actions {\n              flex-direction: column-reverse;\n              gap: 12px;\n            }\n            ")}):(0,a.jsx)("style",{children:"\n            div#fides-banner {\n              width: 90% !important;\n            }\n            "}),(0,a.jsx)(w(),{id:"fides-js-base",src:"/lib/fides.js",onReady:()=>{if(b){var e;null===(e=window.Fides)||void 0===e||e.init(g)}}}),(0,a.jsx)("div",{id:C.Vk,className:h().dynamic([["905800c62191633b",[C.Vk]]])})]}):(0,a.jsx)(N,{title:"No privacy notices added",description:'To view a preview of this experience, add a privacy notice under "Privacy Notices" to the left.'}):(0,a.jsx)(N,{title:"".concat(H.J.get(p.component)," preview not available"),description:"There is no preview available for ".concat(H.J.get(p.component),". You can edit the available settings\n      and languages to the left.")})},O=i(94315),T=i(16194),L=i(16277),P=i(31883);let S=e=>{let n=(0,m.y3)(e),i={};return Object.entries(n).forEach(e=>{let[n,a]=e;if(a.included){let e=f[n];i[n]=a.required?e.validation.required().label(e.label):e.validation.nullable().label(e.label)}}),s.Ry().shape(i)},B=e=>{let{componentType:n}=e;return S(n)},R=s.Ry().shape({name:s.Z_().required().label("Experience name"),component:s.Z_().required().label("Experience type"),translations:s.IX().when("component",(e,n)=>{let[i]=e;return n.of(B({componentType:i}))})});var U=e=>{var n;let{passedInExperience:i,passedInTranslations:s}=e,[f]=(0,O.mJ)(),[y]=(0,O.$d)(),h=(0,t.pmc)(),[x,w]=(0,r.useState)(!1),C=(0,l.useRouter)(),{data:k}=(0,_.tB)({api_set:!1}),j=null==k?void 0:null===(n=k.plus_consent_settings)||void 0===n?void 0:n.enable_translations,V=(0,d.C)(g.Zp),Z=(0,d.C)(g.G1);(0,g.Ah)({page:V,size:Z});let E=(0,d.C)(g.fJ),A=(0,d.C)(D.sX),H=i?{...m.DD,...(0,m.Uv)(i)}:m.DD,N=async e=>{var n,a;let t;e.privacy_notice_ids=null===(n=e.privacy_notice_ids)||void 0===n?void 0:n.filter(e=>"tcf_purposes_placeholder"!==e);let o={...e,disabled:null===(a=null==i?void 0:i.disabled)||void 0===a||a,allow_language_selection:e.translations&&e.translations.length>1};if(i){let{component:e,...n}=o;t=await y({...n,id:i.id})}else t=await f(o);(0,P.D4)(t)?h((0,b.Vo)((0,c.e$)(t.error))):(h((0,b.t5)("Privacy experience successfully ".concat(i?"updated":"created"))),C.push(v.w0))},[S,B]=(0,r.useState)(void 0),[U,I]=(0,r.useState)(!1);return(0,a.jsx)(o.J9,{initialValues:H,enableReinitialize:!0,onSubmit:N,validationSchema:R,children:(0,a.jsx)(o.l0,{style:{height:"100vh"},children:(0,a.jsxs)(t.kCb,{w:"full",h:"full",direction:"row","data-testid":"privacy-experience-detail-page",children:[S?(0,a.jsx)(L.Z,{translation:S,translationsEnabled:j,isOOB:U,onReturnToMainForm:()=>{B(void 0),I(!1)}}):(0,a.jsx)(T.d0,{allPrivacyNotices:A,translationsEnabled:j,onSelectTranslation:e=>{B({...e,name:(0,m.Go)(e,E)})},onCreateTranslation:e=>{let n=null==s?void 0:s.find(n=>n.language===e);return n&&I(!0),null!=n?n:{language:e,is_default:!1}}}),(0,a.jsxs)(t.kCb,{direction:"column",w:"75%",bgColor:"gray.50",overflowY:"hidden",children:[(0,a.jsxs)(t.kCb,{direction:"row",p:4,align:"center",bgColor:"white",borderBottom:"1px solid #DEE5EE",children:[(0,a.jsx)(t.xvT,{fontSize:"md",fontWeight:"semibold",children:"PREVIEW"}),(0,a.jsx)(t.LZC,{}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(t.wpx,{icon:(0,a.jsx)(u,{}),"aria-label":"View mobile preview",onClick:()=>w(!0),className:x?"bg-gray-200":void 0}),(0,a.jsx)(t.wpx,{icon:(0,a.jsx)(p,{}),"aria-label":"View desktop preview",onClick:()=>w(!1),className:x?void 0:"bg-gray-200"})]})]}),(0,a.jsx)(M,{allPrivacyNotices:A,initialValues:H,translation:S,isMobilePreview:x})]})]})})})}},32222:function(e,n,i){i.d(n,{J:function(){return a}});let a=new Map([["overlay","Overlay"],["privacy_center","Privacy center"],["tcf_overlay","TCF overlay"],["modal","Modal"],["banner_and_modal","Banner and modal"],["headless","Headless"]])},31883:function(e,n,i){i.d(n,{Bw:function(){return a.Bw},D4:function(){return a.D4}});var a=i(19043)}}]);