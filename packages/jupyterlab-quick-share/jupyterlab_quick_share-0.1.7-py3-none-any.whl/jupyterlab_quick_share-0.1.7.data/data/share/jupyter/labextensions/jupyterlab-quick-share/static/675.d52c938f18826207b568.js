"use strict";(self.webpackChunkjupyterlab_quick_share=self.webpackChunkjupyterlab_quick_share||[]).push([[675],{675:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var o=r(569),n=r(928),a=r(507),i=r(989),c=r(808),s=r(695);const l={id:"jupyterlab-quick-share:plugin",description:"Send/receive links that make it easy to share notebooks (and other files)",autoStart:!0,requires:[n.IFileBrowserFactory,a.ISettingRegistry],activate:async(e,t,r)=>{console.log("JupyterLab extension jupyterlab-quick-share is activated!"),(await r.load(l.id)).composite.private.enableJupytextIssue1344Fix&&function(e){e.shell.layoutModified.connect((()=>{var e;const t=document.querySelector(".jp-Launcher-content");if(!t)return;const r=document.querySelectorAll(".jp-Launcher-sectionTitle"),o=u("Jupytext",r);o&&(t.prepend(o),null===(e=u("Notebook",r))||void 0===e||e.remove())}))}(e);const{tracker:n}=t;e.commands.addCommand("jupyterlab-quick-share:share",{label:"Copy Quick Share Link",icon:i.shareIcon,isVisible:()=>!!n.currentWidget&&1===Array.from(n.currentWidget.selectedItems()).length,execute:async()=>{const e=n.currentWidget;if(!e)return;const t=e.selectedItems().next().value.path;try{const e=await async function(e="",t={}){const r=s.ServerConnection.makeSettings(),o=c.URLExt.join(r.baseUrl,"jupyterlab-quick-share",e);let n;try{n=await s.ServerConnection.makeRequest(o,t,r)}catch(e){throw new s.ServerConnection.NetworkError(e)}let a=await n.text();if(a.length>0)try{a=JSON.parse(a)}catch(e){console.log("Not a JSON response body.",n)}if(!n.ok)throw new s.ServerConnection.ResponseError(n,a.message||a);return a}(`share?path=${encodeURIComponent(t)}`);await navigator.clipboard.writeText(e.url),console.log("Copied to clipboard:",e.url)}catch(e){console.error("Failed to copy quick share link:",e),(0,o.showErrorMessage)("Quick Share Failed",e)}}}),e.contextMenu.addItem({command:"jupyterlab-quick-share:share",selector:'.jp-DirListing-item[data-isdir="false"]',rank:0})}};function u(e,t){var r;return null===(r=Array.from(t).find((t=>{var r;return(null===(r=t.textContent)||void 0===r?void 0:r.trim())===e})))||void 0===r?void 0:r.closest(".jp-Launcher-section")}const d=l}}]);